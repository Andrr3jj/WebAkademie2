"use strict";(self["webpackChunkheligonkova_akademia"]=self["webpackChunkheligonkova_akademia"]||[]).push([[639],{639:function(t,a,e){e.r(a),e.d(a,{default:function(){return U}});var n=e(3396),i=e(7139),s=e(9242);const o=["id"],l={class:"scroll"},d={class:"box-text"},r={class:"left"},u={class:"title"},p={class:"button"},h=["onClick"],c=["onClick"],_={class:"pagination-controls"},v=["disabled"],x=["disabled"],m={class:"right"},y={class:"title"},g={class:"button"},k=["onClick"],b=["onClick"],T={class:"addsong-grid"},z={class:"addsong-left"},f={class:"form-group"},w=["value"],j={class:"addsong-right"},D={class:"form-group select-group"},C={class:"form-group select-group"},B={class:"form-group select-group"},$={class:"form-group select-group"},S={class:"form-group modern-question"},M={class:"modern-radio"},L={class:"footer-grid"};function q(t,a,e,q,P,V){return(0,n.wg)(),(0,n.iD)("section",{id:t.$route.name},[(0,n._)("div",l,[a[42]||(a[42]=(0,n._)("h1",null,"Administratívny systém",-1)),a[43]||(a[43]=(0,n._)("h5",null,"Zoznam a pridavanie textov",-1)),a[44]||(a[44]=(0,n._)("div",{class:"line not horizontal w-80"},null,-1)),(0,n._)("div",d,[(0,n._)("div",r,[(0,n._)("div",u,[a[15]||(a[15]=(0,n._)("h2",{class:"nadpis Bahnshrift"},"Zoznam piesni",-1)),(0,n._)("p",p,(0,i.zw)(this.dataTextov.schvalene.length),1)]),a[19]||(a[19]=(0,n._)("div",{class:"line horizontal"},null,-1)),(0,n._)("table",null,[a[18]||(a[18]=(0,n._)("thead",null,[(0,n._)("th",{style:{width:"65%"}}),(0,n._)("th",{style:{width:"25%"}}),(0,n._)("th",{style:{width:"10%"}})],-1)),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(P.dataTextov.schvalene,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",null,(0,i.zw)(t.nazov),1),(0,n._)("td",null,[(0,n._)("div",{onClick:a=>V.nacitajKonretnyText(t.id),class:"button edit"},a[16]||(a[16]=[(0,n._)("a",null,"Upraviť",-1)]),8,h)]),(0,n._)("td",null,[(0,n._)("div",{onClick:a=>V.zmazanieTextu(t.id),title:"Vymazať",class:"red-button button"},a[17]||(a[17]=[(0,n._)("a",null,"X",-1)]),8,c)])])))),128))])]),(0,n._)("div",_,[(0,n._)("button",{class:"button",onClick:a[0]||(a[0]=t=>V.prevPage()),disabled:0===P.paginationIndex}," Späť ",8,v),(0,n._)("button",{class:"button",onClick:a[1]||(a[1]=t=>V.nextPage()),disabled:P.lastBatchCount<P.paginationLimit}," Ďalej ",8,x)])]),(0,n._)("div",m,[(0,n._)("div",y,[a[20]||(a[20]=(0,n._)("h2",{class:"nadpis Bahnshrift"},"Návrhy od používateľov",-1)),(0,n._)("p",g,(0,i.zw)(this.dataTextov.neschvalene.length),1)]),a[40]||(a[40]=(0,n._)("div",{class:"line horizontal"},null,-1)),(0,n._)("table",null,[a[23]||(a[23]=(0,n._)("thead",null,[(0,n._)("th",{style:{width:"65%"}}),(0,n._)("th",{style:{width:"25%"}}),(0,n._)("th",{style:{width:"10%"}})],-1)),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(P.dataTextov.neschvalene,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:e},[(0,n._)("td",null,(0,i.zw)(t.nazov),1),(0,n._)("td",null,[(0,n._)("div",{onClick:a=>V.nacitajKonretnyText(t.id),class:"button edit"},a[21]||(a[21]=[(0,n._)("a",null,"Pridať",-1)]),8,k)]),(0,n._)("td",null,[(0,n._)("div",{onClick:a=>V.zmazanieTextu(t.id),title:"Vymazať",class:"red-button button"},a[22]||(a[22]=[(0,n._)("a",null,"X",-1)]),8,b)])])))),128))])]),a[41]||(a[41]=(0,n._)("div",{class:"line horizontal"},null,-1)),(0,n._)("div",T,[(0,n._)("div",z,[a[26]||(a[26]=(0,n._)("span",{class:"section-title"},"▸ Čo vyplniť:",-1)),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=t=>P.data.nazov=t),placeholder:"Názov piesne",class:"big-input"},null,512),[[s.nr,P.data.nazov]]),(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":a[3]||(a[3]=t=>P.data.text_piesne=t),placeholder:"Text piesne",class:"big-input"},null,512),[[s.nr,P.data.text_piesne]]),(0,n._)("div",f,[a[25]||(a[25]=(0,n._)("label",null,"Produkt na prepojenie",-1)),(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":a[4]||(a[4]=t=>P.data.product_id=t)},[a[24]||(a[24]=(0,n._)("option",{value:"0"},"-- Číselný zápis --",-1)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(V.zoradenyEditorZoznam,(t=>((0,n.wg)(),(0,n.iD)("option",{key:t.id,value:t.id},(0,i.zw)(t.name),9,w)))),128))],512),[[s.bM,P.data.product_id,void 0,{number:!0}]])])]),(0,n._)("div",j,[(0,n._)("div",D,[a[28]||(a[28]=(0,n._)("label",null,"Typ piesne:",-1)),(0,n.wy)((0,n._)("select",{onChange:a[5]||(a[5]=t=>P.data.autorska="Autorská"===P.data.typ),"onUpdate:modelValue":a[6]||(a[6]=t=>P.data.typ=t)},a[27]||(a[27]=[(0,n._)("option",null,"Ľudová",-1),(0,n._)("option",null,"Autorská",-1)]),544),[[s.bM,P.data.typ]])]),(0,n._)("div",C,[a[30]||(a[30]=(0,n._)("label",null,"Žáner:",-1)),(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":a[7]||(a[7]=t=>P.data.zaner=t)},a[29]||(a[29]=[(0,n._)("option",null,"Polka",-1),(0,n._)("option",null,"Valčík",-1),(0,n._)("option",null,"Čardáš",-1)]),512),[[s.bM,P.data.zaner]])]),(0,n._)("div",B,[a[32]||(a[32]=(0,n._)("label",null,"Pôvod:",-1)),(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":a[8]||(a[8]=t=>P.data.povod=t)},a[31]||(a[31]=[(0,n._)("option",null,"Česká",-1),(0,n._)("option",null,"Slovenská",-1),(0,n._)("option",null,"Iná",-1)]),512),[[s.bM,P.data.povod]])]),(0,n._)("div",$,[a[34]||(a[34]=(0,n._)("label",null,"Kategória piesne:",-1)),(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":a[9]||(a[9]=t=>P.data.kategoria=t)},a[33]||(a[33]=[(0,n._)("option",null,"Polka",-1),(0,n._)("option",null,"Valčík",-1),(0,n._)("option",null,"Česká",-1),(0,n._)("option",null,"Terchovská",-1),(0,n._)("option",null,"Moderná",-1)]),512),[[s.bM,P.data.kategoria]])]),(0,n._)("div",S,[a[37]||(a[37]=(0,n._)("label",{class:"modern-label"},"Jedná sa o modernú pieseň?",-1)),(0,n._)("label",M,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=t=>P.data.jeModerna=t),value:!0},null,512),[[s.e8,P.data.jeModerna]]),a[35]||(a[35]=(0,n._)("span",{class:"radio-custom"},null,-1)),a[36]||(a[36]=(0,n.Uk)(" Áno, ide o modernú pieseň "))])]),P.data.autorska?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[a[38]||(a[38]=(0,n._)("div",{class:"modern-note"}," Pri autorskej piesni je potrebné uviesť meno autora textu ",-1)),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":a[11]||(a[11]=t=>P.data.autor=t),placeholder:"Meno autora textu",class:"author-input"},null,512),[[s.nr,P.data.autor]])],64)):(0,n.kq)("",!0)])]),(0,n._)("div",L,[a[39]||(a[39]=(0,n._)("div",null,[(0,n._)("span",{class:"section-title"},"▸ Po odoslaní:"),(0,n._)("span",{class:"footer-desc"})],-1)),V.isDataChanged?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"button Adumu",onClick:a[12]||(a[12]=t=>V.resetData())}," Zrušiť ")):(0,n.kq)("",!0),0==P.upravujem?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"button Adumu",onClick:a[13]||(a[13]=t=>V.vytvorenieTextu())}," Pridať ")):((0,n.wg)(),(0,n.iD)("button",{key:2,class:"button Adumu",onClick:a[14]||(a[14]=t=>V.upravenieTextu())}," Upraviť "))])])])])],8,o)}var P={mounted(){window.scrollTo(0,0),this.nacitajTexty(),this.nacitajInfoEditorZapisy()},data(){return{data:this.getDefaultData(),dataTextov:{schvalene:[],neschvalene:[]},editorZoznam:[],upravujem:0,paginationIndex:0,paginationLimit:20,lastBatchCount:0}},methods:{getDefaultData(){return{nazov:"",text_piesne:"",product_id:0,favorite:"",hidden:"",typ:"",zaner:"",povod:"",kategoria:"",jeModerna:!1,autorska:!1,autor:"",schvalene:1}},resetData(){this.data=this.getDefaultData(),this.upravujem=0},loadMore(){this.lastBatchCount<this.paginationLimit||(this.paginationIndex+=this.paginationLimit,this.nacitajTexty())},async nacitajTexty(){const t=e(7218);try{const a=await t.get(this.$store.state.api+"/noty/texty/listAll.php",{params:{pagination_index:this.paginationIndex,pagination_limit:this.paginationLimit}});if("Request succesfull"===a.data.status){const t=a.data.data.schvalene||[],e=a.data.data.neschvalene||[];this.dataTextov.schvalene=t,this.dataTextov.neschvalene=e;const n=t.length+e.length;this.lastBatchCount=n}}catch(a){}},nextPage(){this.lastBatchCount<this.paginationLimit||(this.paginationIndex+=this.paginationLimit,this.nacitajTexty())},prevPage(){0!==this.paginationIndex&&(this.paginationIndex=Math.max(0,this.paginationIndex-this.paginationLimit),this.nacitajTexty())},upravenieTextu(){const t=e(7218);let a=new FormData;0==this.upravujem&&(this.$store.state.SnackBarTex="Pre upravenie si musíte vybrať text"),this.data.text_piesne=this.data.text_piesne.replaceAll("\n","//n"),a.append("nazov",this.data.nazov),a.append("text_piesne",this.data.text_piesne),a.append("product_id",this.data.product_id),a.append("kategoria",this.data.kategoria),a.append("autorska",this.data.autorska?"true":"false"),this.data.autorska&&a.append("autor",this.data.autor),a.append("jeModerna",this.data.jeModerna?"true":"false"),a.append("typ",this.data.typ),a.append("zaner",this.data.zaner),a.append("povod",this.data.povod),a.append("schvalene",1),a.append("id",this.upravujem);let n={method:"post",maxBodyLength:1/0,url:this.$store.state.api+"/noty/texty/update.php",data:a};t.request(n).then((t=>{"Request fullfiled"==t.data.status?(this.resetData(),this.nacitajTexty(),this.$store.state.SnackBarText="Text bol úspešne uložený"):this.$store.state.SnackBarText="Text sa nepodarilo načítať",this.upravujem=0})).catch((t=>{this.$store.state.SnackBarText="Nastala chyba pri načítaní textu."}))},nacitajKonretnyText(t){const a=e(7218);let n={method:"get",maxBodyLength:1/0,url:this.$store.state.api+"/noty/texty/load.php/?id="+t};a.request(n).then((a=>{"Request succesfull"==a.data.status?(this.data=a.data.data,this.data.text_piesne=this.data.text_piesne.replaceAll("//n","\n"),this.upravujem=t):(this.$store.state.SnackBarText="Text sa nepodarilo načítať",this.resetData(),this.upravujem=0)})).catch((t=>{this.$store.state.SnackBarText="Nastala chyba pri načítaní textu."}))},zmazanieTextu(t){if(confirm("Naozaj chcete vymazať tento text?")){const a=e(7218);let n={method:"get",maxBodyLength:1/0,url:this.$store.state.api+"/noty/texty/delete.php/?id="+t};a.request(n).then((t=>{"Request fullfiled"==t.data.status?(this.$store.state.SnackBarText="Text bol vymazaný.",this.nacitajTexty()):this.$store.state.SnackBarText="Text sa nepodarilo vymazať."})).catch((t=>{this.$store.state.SnackBarText="Nastala chyba pri mazaní Textu."}))}},vytvorenieTextu(){const t=e(7218);let a=new FormData;this.data.text_piesne=this.data.text_piesne.replaceAll("\n","//n"),a.append("nazov",this.data.nazov),a.append("text_piesne",this.data.text_piesne),a.append("product_id",this.data.product_id),a.append("kategoria",this.data.kategoria),a.append("autorska",this.data.autorska?"true":"false"),this.data.autorska&&a.append("autor",this.data.autor),a.append("jeModerna",this.data.jeModerna?"true":"false"),a.append("typ",this.data.typ),a.append("zaner",this.data.zaner),a.append("povod",this.data.povod);let n={method:"post",maxBodyLength:1/0,url:this.$store.state.api+"/noty/texty/create.php",data:a};t.request(n).then((t=>{"Request fullfiled"==t.data.status?(this.$store.state.SnackBarText="Text bol úspešne pridaný",this.nacitajTexty(),this.resetData()):(this.$store.state.SnackBarTex="Text sa nepridal",this.odosielanie=!1)})).catch((t=>{this.$store.state.SnackBarText="Text sa nepodarilo pridať",this.odosielanie=!1}))},nacitajInfoEditorZapisy(){const t=e(7218);let a={method:"get",maxBodyLength:1/0,url:this.$store.state.api+"/product/stats/listZapis.php"};t.request(a).then((t=>{"Request succesfull"==t.data.status&&(this.editorZoznam=t.data.data)})).catch((t=>{this.$store.state.SnackBarText="Nepodarilo sa načítať editor"}))}},computed:{reversedData(){let t=this.data.slice().reverse();return this.jeObycajnyAutor&&(t=t.filter((t=>t.author&&t.author.trim().toLowerCase()===this.menoPouzivatela.toLowerCase()))),t},isDataChanged(){return JSON.stringify(this.data)!==JSON.stringify(this.getDefaultData())},zoradenyEditorZoznam(){return[...this.editorZoznam].sort(((t,a)=>t.name.localeCompare(a.name)))}}},V=e(89);const I=(0,V.Z)(P,[["render",q],["__scopeId","data-v-6652ab70"]]);var U=I}}]);