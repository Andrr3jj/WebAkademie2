"use strict";(self["webpackChunkheligonkova_akademia"]=self["webpackChunkheligonkova_akademia"]||[]).push([[9158],{906:function(a,e,t){t.d(e,{Z:function(){return D}});var i=t(3396),s=t(9242),o=t(7139);const n={class:"modal-content base-modal"},d={class:"modal-scroll"},l={key:0,class:"no-folders"},r={key:1,class:"folders-list"},c=["onUpdate:modelValue","id"],h=["for"],y={class:"dialog-actions"},p=["disabled"],k={key:2,class:"error"},u={key:3,class:"success"};function b(a,e,t,b,g,v){const m=(0,i.up)("TheMenu");return(0,i.wg)(),(0,i.j4)(i.lR,{to:"body"},[(0,i._)("div",{class:"overlay",onClick:e[3]||(e[3]=(0,s.iM)((e=>a.$emit("close")),["self"]))},[(0,i._)("div",{class:"modal-overlay",onClick:e[2]||(e[2]=(0,s.iM)((e=>a.$emit("close")),["self"]))},[(0,i._)("div",n,[(0,i._)("div",d,[(0,i._)("h2",null,"Pridať „"+(0,o.zw)(t.item.nazov)+"“ do priečinka",1),0===g.localFolders.length?((0,i.wg)(),(0,i.iD)("div",l," Žiadne dostupné priečinky. ")):((0,i.wg)(),(0,i.iD)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.localFolders,((a,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"folder-row",key:a.name},[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":a=>g.localFolders[e].checked=a,id:"folder-"+e},null,8,c),[[s.e8,g.localFolders[e].checked]]),(0,i._)("label",{for:"folder-"+e},(0,o.zw)(a.name),9,h)])))),128))])),(0,i._)("div",y,[(0,i._)("button",{onClick:e[0]||(e[0]=e=>a.$emit("close")),class:"cancel"},"Zrušiť"),(0,i._)("button",{onClick:e[1]||(e[1]=(...a)=>v.confirm&&v.confirm(...a)),disabled:!v.hasSelected||g.loading,class:"confirm"}," Pridať ",8,p)]),g.error?((0,i.wg)(),(0,i.iD)("div",k,(0,o.zw)(g.error),1)):(0,i.kq)("",!0),g.success?((0,i.wg)(),(0,i.iD)("div",u,(0,o.zw)(g.success),1)):(0,i.kq)("",!0)])])]),(0,i.Wm)(m,{class:"fake-menu",style:{margin:"0 1em",opacity:"0","z-index":"-1","pointer-events":"none"}})])])}var g=t(3239),v=t(1076),m={components:{TheMenu:g.Z},props:{item:{type:Object,required:!0},folders:{type:Array,required:!0}},data(){return{loading:!1,error:"",success:"",localFolders:[]}},computed:{hasSelected(){return this.localFolders.some((a=>a.checked))}},watch:{folders:{handler(a){this.localFolders=a.map((a=>({name:a.name,checked:a.checked||!1})))},immediate:!0,deep:!0}},methods:{async confirm(){this.loading=!0,this.error="";try{await Promise.all(this.localFolders.map((a=>{const e=`${this.$store.state.api}/folder/${a.checked?"add.php":"remove.php"}`,t=new FormData;return t.append("id",this.item.id),t.append("name",a.name),v["default"].post(e,t)}))),this.$emit("done"),this.$emit("close")}catch{this.error="Chyba pri aktualizácii priečinkov."}finally{this.loading=!1}}}},f=t(89);const z=(0,f.Z)(m,[["render",b],["__scopeId","data-v-3f609a70"]]);var D=z},9158:function(a,e,t){t.r(e),t.d(e,{default:function(){return Ba}});var i=t(3396),s=t(9242),o=t(7139);const n=["id"],d={class:"modal-overlay"},l={class:"modal-content"},r={key:0,for:"lines"},c={class:"main-content"},h={class:"information"},y=["placeholder"],p=["placeholder"],k=["placeholder"],u={class:"template"},b=["onContextmenu"],g={class:"zapis-cast"},v={class:"takty"},m=["onContextmenu"],f=["onContextmenu"],z={class:"riadky"},D={key:0,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/Zaciatok - noty.svg",alt:"Začiatok nôt polka",class:"start-riadky"},x={key:1,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/Zaciatok - noty2.svg",alt:"Začiatok nôt valčík",class:"start-riadky"},w={class:"riadky-overflow"},_=["onDblclick"],C=["onContextmenu","onKeyup","onKeydown"],T=["onUpdate:modelValue","placeholder"],S=["onUpdate:modelValue","placeholder"],N={key:11,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/2-dob-rozdelene.svg",alt:"Držanie na 2 doby",class:"doby2-rozdelene"},M={key:12,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/4-dob-rozdelene.svg",alt:"Držanie na 4 doby",class:"doby4-rozdelene"},$={key:13,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/6-dob-rozdelene.svg",alt:"Držanie na 6 doby",class:"doby6-rozdelene"},R={key:14,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/8-dob-rozdelene.svg",alt:"Držanie na 8 doby",class:"doby8-rozdelene"},q={key:15,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/10-dob-rozdelene.svg",alt:"Držanie na 10 doby",class:"doby10-rozdelene"},Z={key:16,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/12-dob-rozdelene.svg",alt:"Držanie na 12 doby",class:"doby12-rozdelene"},I={key:17,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/14-dob-rozdelene.svg",alt:"Držanie na 14 doby",class:"doby14-rozdelene"},V={key:18,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/2-dob-rozdelene.svg",alt:"Držanie na 2 doby",class:"doby2-rozdelene inverz"},P={key:19,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/4-dob-rozdelene.svg",alt:"Držanie na 4 doby",class:"doby4-rozdelene inverz"},A={key:20,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/6-dob-rozdelene.svg",alt:"Držanie na 6 doby",class:"doby6-rozdelene inverz"},B={key:21,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/8-dob-rozdelene.svg",alt:"Držanie na 8 doby",class:"doby8-rozdelene inverz"},j={key:22,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/10-dob-rozdelene.svg",alt:"Držanie na 10 doby",class:"doby10-rozdelene inverz"},H={key:23,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/12-dob-rozdelene.svg",alt:"Držanie na 12 doby",class:"doby12-rozdelene inverz"},L={key:24,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/14-dob-rozdelene.svg",alt:"Držanie na 14 doby",class:"doby14-rozdelene inverz"},K={key:0,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/Refren - VLAVO.svg?v=2",alt:"opakovanie začiatok"},E={key:1,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/Refren - VPRAVO.svg?v=2",alt:"opakovanie koniec"},F={key:2,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/Koniec noty.svg",alt:"Koniec nôt",class:"end-riadky"},O=["onUpdate:modelValue","placeholder","onInput","onDblclick","onKeydown"],U={class:"basy"},G={key:0,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/Zaciatok - Basy - noty.svg",alt:"Začiatok bás",class:"start-basy"},Y=["onContextmenu"],X=["onUpdate:modelValue","placeholder","onDblclick"],J=["onUpdate:modelValue","placeholder"],W={key:0,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/Refren - Basy - VLAVO.svg?v=2",alt:"opakovanie začiatok"},Q={key:1,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/Refren - Basy - VPRAVO.svg?v=2",alt:"opakovanie koniec"},aa={key:2,class:"drzanie-basa"},ea={key:7,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/2-doby-basy-zac.svg",alt:"Držanie na 2 doby",class:"doba2-basy-rozdelene"},ta={key:9,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/4-doby-basy-zac.svg",alt:"Držanie na 4 doby",class:"doba4-basy-rozdelene"},ia={key:11,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/1-doby-basy-kon.svg",alt:"Držanie na 1 doby",class:"doba1-basy-rozdelene-kon ukoncenie"},sa={key:12,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/2-doby-basy-kon.svg",alt:"Držanie na 2 doby",class:"doba2-basy-rozdelene-kon ukoncenie"},oa={key:13,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/3-doby-basy-kon.svg",alt:"Držanie na 3 doby",class:"doba3-basy-rozdelene-kon ukoncenie"},na={key:14,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/4-doby-basy-kon.svg",alt:"Držanie na 4 doby",class:"doba4-basy-rozdelene-kon ukoncenie"},da={key:1,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/Koniec - Basy - Noty.svg",alt:"Koniec bás",class:"end-basy"},la=["onDblclick"],ra={class:"popis-cast"},ca=["onDblclick"],ha=["onUpdate:modelValue","placeholder"],ya=["placeholder"],pa=["placeholder"],ka={key:0,class:"akcie-container"},ua={class:"akcie"},ba={key:0,class:"button"},ga={class:"akcie"},va={class:"button button-under"},ma=["viewBox"],fa=["onClick","onKeydown","onMouseenter"],za=["d"],Da=["transform"],xa={key:0,"text-anchor":"middle","dominant-baseline":"middle"},wa=["transform"],_a={key:0,x:"-36",y:"-36",width:"72",height:"72"},Ca=["innerHTML"],Ta={key:1,"text-anchor":"middle","dominant-baseline":"middle"},Sa=["cx","cy","r"],Na=["x","y"];function Ma(a,e,t,Ma,$a,Ra){const qa=(0,i.up)("AddToFolderDialog");return(0,i.wg)(),(0,i.iD)("section",{ref:"htmlContent",onContextmenu:e[36]||(e[36]=(0,s.iM)((a=>Ra.checkContextMenu(a)),["prevent"])),id:a.$route.name},[(0,i._)("form",{class:"scroll",onSubmit:e[28]||(e[28]=(0,s.iM)(((...e)=>a.zapisanieZapisu&&a.zapisanieZapisu(...e)),["prevent"]))},[$a.showModal?((0,i.wg)(),(0,i.j4)(s.uT,{key:0,name:"modal-fade"},{default:(0,i.w5)((()=>[(0,i._)("div",d,[(0,i._)("div",l,[e[41]||(e[41]=(0,i._)("h2",null,"Zadaj údaje",-1)),(0,i._)("div",null,[e[38]||(e[38]=(0,i._)("label",{for:"beats"},"Počet dôb:",-1)),(0,i.wy)((0,i._)("input",{type:"number",id:"beats","onUpdate:modelValue":e[0]||(e[0]=a=>$a.zapisyData.doby=a),required:"",min:"3",max:"4"},null,512),[[s.nr,$a.zapisyData.doby]]),e[39]||(e[39]=(0,i._)("br",null,null,-1)),3==$a.zapisyData.doby?((0,i.wg)(),(0,i.iD)("label",r,"Počet taktov v časti")):(0,i.kq)("",!0),3==$a.zapisyData.doby?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:1,type:"number",id:"lines","onUpdate:modelValue":e[1]||(e[1]=a=>Ra.displayedPocetTaktov=a),required:"",min:"4",max:"5"},null,512)),[[s.nr,Ra.displayedPocetTaktov]]):(0,i.kq)("",!0),e[40]||(e[40]=(0,i._)("br",null,null,-1)),(0,i._)("a",{onClick:e[2]||(e[2]=a=>Ra.submitForm()),type:"button",class:"submit-btn button"},e[37]||(e[37]=[(0,i._)("p",null,"Potvrdiť",-1)]))])])])])),_:1})):(0,i.kq)("",!0),(0,i.wy)((0,i._)("div",c,[(0,i._)("div",h,[(0,i.wy)((0,i._)("input",{ref:"nazov",type:"text",name:"nazov-piesne",placeholder:$a.zapisyData.nazov?$a.zapisyData.nazov:"Názov",class:"title","onUpdate:modelValue":e[3]||(e[3]=a=>$a.zapisyData.nazov=a)},null,8,y),[[s.nr,$a.zapisyData.nazov]]),(0,i.wy)((0,i._)("input",{ref:"stupnica",type:"text",name:"stupnica-piesne",placeholder:$a.zapisyData.stupnica?$a.zapisyData.stupnica:"Stupnica",class:"stupnica","onUpdate:modelValue":e[4]||(e[4]=a=>$a.zapisyData.stupnica=a)},null,8,p),[[s.nr,$a.zapisyData.stupnica]]),(0,i.wy)((0,i._)("input",{ref:"autor",type:"text",name:"autor-piesne",placeholder:$a.zapisyData.autor?$a.zapisyData.autor:"Autor",class:"autor","onUpdate:modelValue":e[5]||(e[5]=a=>$a.zapisyData.autor=a)},null,8,k),[[s.nr,$a.zapisyData.autor]])]),(0,i._)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($a.dataNoty.casty,((a,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:(0,o.C_)(["cast",{"cast-margin":4==$a.pocetCasti&&(t%4===0&&t>=4)},{"cast-margin2":5==$a.pocetCasti&&(t%5===0&&t>=5)}]),onContextmenu:(0,s.iM)((a=>Ra.showContextMenuCast(a,t)),["prevent"])},[(0,i._)("div",g,[(0,i._)("div",v,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.takty,((t,n)=>((0,i.wg)(),(0,i.iD)("div",{key:n,class:(0,o.C_)(["takt",[{"takt-prva":0===n,"takt-posledna":n===a.takty.length-1||n<a.takty.length-1&&!0===(a.takty[n+1].isGhost||!1),"i-am-not-here-smile":!0===t.isGhost}]]),onContextmenu:(0,s.iM)((a=>Ra.showContextMenuTakt(a,t)),["prevent"])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.doby,((d,l)=>((0,i.wg)(),(0,i.iD)("div",{key:l,class:(0,o.C_)(["doba",{"doba-prva":0===l,"doba-posledna":l===t.doby.length-1,"i-am-not-here-smile":!0===d.isGhost}]),onContextmenu:(0,s.iM)((a=>Ra.showContextMenuDoba(a,d)),["prevent"])},[(0,i._)("div",z,[4==$a.zapisyData.doby&&(0===n&&0===l||n>0&&!0===a.takty[n-1].isGhost&&0===l)?((0,i.wg)(),(0,i.iD)("img",D)):(0,i.kq)("",!0),3==$a.zapisyData.doby&&(0===n&&0===l||n>0&&!0===a.takty[n-1].isGhost&&0===l)?((0,i.wg)(),(0,i.iD)("img",x)):(0,i.kq)("",!0),(0,i._)("div",w,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(d.riadky,((a,n)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,o.C_)(["riadok",{green:d.smer_pravo&&""!=a.hodnota_cisla[0].cela_gulicka[0].cislo,yellow:d.smer_vlavo&&""!=a.hodnota_cisla[0].cela_gulicka[0].cislo}]),key:n,onDblclick:e=>""==a.hodnota_cisla[0].cela_gulicka[0].cislo?a.hodnota_cisla[0].cela_gulicka[0].cislo="0":a.hodnota_cisla[0].cela_gulicka[0].cislo=""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.hodnota_cisla[0].cela_gulicka,((t,d)=>((0,i.wg)(),(0,i.iD)("div",{key:d,onContextmenu:(0,s.iM)((e=>Ra.showContextMenuRiadok(e,a,n)),["prevent"]),onKeyup:(0,s.D2)((e=>Ra.addInput(a.hodnota_cisla[0])),["enter"]),onKeydown:(0,s.D2)((0,s.iM)((e=>Ra.deleteInput(a.hodnota_cisla[0],d)),["shift"]),["backspace"]),class:(0,o.C_)(Ra.getInputClass(a.hodnota_cisla[0]))},[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":a=>t.cislo=a,type:"text",class:"doba-cislo",placeholder:t.cislo?t.cislo:$a.dotSee?"·":"",onKeydown:e[6]||(e[6]=a=>Ra.moveToNextInput(a,".doba-cislo")),style:(0,o.j5)({opacity:0!=t.cislo||""==t.cislo?1:.001})},null,44,T),[[s.nr,t.cislo]]),"0"!=t.index?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:0,"onUpdate:modelValue":a=>t.index=a,type:"text",class:"doba-index doba-index-tabs",placeholder:t.index?t.index:$a.dotSee?"·":"",onKeydown:e[7]||(e[7]=a=>Ra.moveToNextInput(a,".doba-index-tabs"))},null,40,S)),[[s.nr,t.index]]):(0,i.kq)("",!0)],42,C)))),128)),a.drzanie>1?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,o.C_)(["drzanie",[3==Number($a.zapisyData.doby)?"doby-na-takt3":""]])},[2==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:0,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/2-doby.svg",alt:"Držanie na dve doby",class:(0,o.C_)(["doby2",{"doby2-koniec":l===t.doby.length-1}])},null,2)):(0,i.kq)("",!0),3==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:1,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/3-doby.svg",alt:"Držanie na tri doby",class:(0,o.C_)(["doby3",{"doby3-koniec":l===t.doby.length-1||l===t.doby.length-2}])},null,2)):(0,i.kq)("",!0),4==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:2,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/4-doby.svg",alt:"Držanie na štyri doby",class:(0,o.C_)(["doby4",{"doby4-koniec":l===t.doby.length-1||l===t.doby.length-2||l===t.doby.length-3}])},null,2)):(0,i.kq)("",!0),5==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:3,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/5-dob.svg",alt:"Držanie na päť doby",class:(0,o.C_)(["doby5",{"doby5-koniec":3===Number($a.zapisyData.doby)&&l===t.doby.length-1}])},null,2)):(0,i.kq)("",!0),6==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:4,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/6-dob.svg",alt:"Držanie na šesť doby",class:(0,o.C_)(["doby6",{"doby6-koniec":4===Number($a.zapisyData.doby)?l===t.doby.length-1:3===Number($a.zapisyData.doby)&&(l===t.doby.length-2||l===t.doby.length-1)}])},null,2)):(0,i.kq)("",!0),7==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:5,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/7-dob.svg",alt:"Držanie na sedem doby",class:(0,o.C_)(["doby7",{"doby7-koniec":l===t.doby.length-1||l===t.doby.length-2}])},null,2)):(0,i.kq)("",!0),8==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:6,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/8-dob.svg",alt:"Držanie na osem doby",class:(0,o.C_)(["doby8",{"doby8-koniec":4===Number($a.zapisyData.doby)?l===t.doby.length-1||l===t.doby.length-2||l===t.doby.length-3:3===Number($a.zapisyData.doby)&&l===t.doby.length-1}])},null,2)):(0,i.kq)("",!0),9==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:7,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/9-dob.svg",alt:"Držanie na deväť doby",class:(0,o.C_)(["doby9",{"doby9-koniec":3===Number($a.zapisyData.doby)&&(l===t.doby.length-1||l===t.doby.length-2)}])},null,2)):(0,i.kq)("",!0),10==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:8,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/10-dob.svg",alt:"Držanie na desať doby",class:(0,o.C_)(["doby10",{"doby10-koniec":4===Number($a.zapisyData.doby)?l===t.doby.length-1:3===Number($a.zapisyData.doby)&&(l===t.doby.length-2||l===t.doby.length-1)}])},null,2)):(0,i.kq)("",!0),11==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:9,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/11-dob.svg",alt:"Držanie na jedenásť dôb",class:(0,o.C_)(["doby11",{"doby11-koniec":4==Number($a.zapisyData.doby)?l===t.doby.length-1||l===t.doby.length-2:l===t.doby.length-1}])},null,2)):(0,i.kq)("",!0),12==a.drzanie?((0,i.wg)(),(0,i.iD)("img",{key:10,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/12-dob.svg",alt:"Držanie na dvanásť dôb",class:(0,o.C_)(["doby12",{"doby12-koniec":4===Number($a.zapisyData.doby)&&(Number(l)===Number(t.doby.length)-1||Number(l)===Number(t.doby.length)-2||Number(l)===Number(t.doby.length)-3)||3===Number($a.zapisyData.doby)&&Number(l)===Number(t.doby.length)-1}])},null,2)):(0,i.kq)("",!0),20==a.drzanie?((0,i.wg)(),(0,i.iD)("img",N)):(0,i.kq)("",!0),40==a.drzanie?((0,i.wg)(),(0,i.iD)("img",M)):(0,i.kq)("",!0),60==a.drzanie?((0,i.wg)(),(0,i.iD)("img",$)):(0,i.kq)("",!0),80==a.drzanie?((0,i.wg)(),(0,i.iD)("img",R)):(0,i.kq)("",!0),100==a.drzanie?((0,i.wg)(),(0,i.iD)("img",q)):(0,i.kq)("",!0),120==a.drzanie?((0,i.wg)(),(0,i.iD)("img",Z)):(0,i.kq)("",!0),140==a.drzanie?((0,i.wg)(),(0,i.iD)("img",I)):(0,i.kq)("",!0),200==a.drzanie?((0,i.wg)(),(0,i.iD)("img",V)):(0,i.kq)("",!0),400==a.drzanie?((0,i.wg)(),(0,i.iD)("img",P)):(0,i.kq)("",!0),600==a.drzanie?((0,i.wg)(),(0,i.iD)("img",A)):(0,i.kq)("",!0),800==a.drzanie?((0,i.wg)(),(0,i.iD)("img",B)):(0,i.kq)("",!0),1e3==a.drzanie?((0,i.wg)(),(0,i.iD)("img",j)):(0,i.kq)("",!0),1200==a.drzanie?((0,i.wg)(),(0,i.iD)("img",H)):(0,i.kq)("",!0),1400==a.drzanie?((0,i.wg)(),(0,i.iD)("img",L)):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0)],42,_)))),128)),d.opakovanie_koniec||d.opakovanie_zaciatok?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,o.C_)(["opakovanie",[{"opakovanie-zaciatok":d.opakovanie_zaciatok,"opakovanie-koniec":d.opakovanie_koniec}]])},[d.opakovanie_zaciatok?((0,i.wg)(),(0,i.iD)("img",K)):(0,i.kq)("",!0),d.opakovanie_koniec?((0,i.wg)(),(0,i.iD)("img",E)):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0)]),n==a.takty.length-1&&l==t.doby.length-1||n<a.takty.length-1&&!0===(a.takty[n+1].isGhost||!1)&&l==t.doby.length-1?((0,i.wg)(),(0,i.iD)("img",F)):(0,i.kq)("",!0)]),(0,i._)("div",{class:(0,o.C_)([[{"slabo-siva":1==d.farba,"stredne-siva":2==d.farba,"silno-siva":3==d.farba}],"smer"])},[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":a=>d.smer=a,type:"text",class:"doba-smer",placeholder:d.smer?d.smer:$a.dotSee?"·":"",onInput:a=>Ra.checkSmer(d),onDblclick:a=>Ra.changeColor(d),onKeydown:a=>{Ra.handleKeyDown(a,d),Ra.moveToNextInput(a,".doba-smer")}},null,40,O),[[s.nr,d.smer]])],2),(0,i._)("div",U,[0===n&&0===l||n>0&&!0===a.takty[n-1].isGhost&&0===l?((0,i.wg)(),(0,i.iD)("img",G)):(0,i.kq)("",!0),(0,i._)("div",{class:(0,o.C_)(["basa",{green:d.smer_pravo&&d.basa.trim(),yellow:d.smer_vlavo&&d.basa.trim()}]),onContextmenu:(0,s.iM)((a=>Ra.showContextMenuBass(a,d)),["prevent"])},[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":a=>d.basa=a,type:"text",class:(0,o.C_)(["doba-basa",{"small-g":d.basa&&d.basa.includes("g")}]),placeholder:d.basa?d.basa:$a.dotSee?"·":"",style:(0,o.j5)({opacity:0!==parseFloat(d.basa)?1:.001}),onDblclick:a=>""==d.basa?d.basa="0":d.basa="",onKeydown:e[8]||(e[8]=a=>Ra.moveToNextInput(a,".doba-basa"))},null,46,X),[[s.nr,d.basa]]),"0"!=d.basa_index?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:0,"onUpdate:modelValue":a=>d.basa_index=a,type:"text",class:"doba-index basa-index",placeholder:d.basa_index?d.basa_index:$a.dotSee?"·":"",onKeydown:e[9]||(e[9]=a=>Ra.moveToNextInput(a,".basa-index"))},null,40,J)),[[s.nr,d.basa_index]]):(0,i.kq)("",!0),d.opakovanie_koniec||d.opakovanie_zaciatok?((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,o.C_)(["opakovanie",[{"opakovanie-zaciatok":d.opakovanie_zaciatok,"opakovanie-koniec":d.opakovanie_koniec}]])},[d.opakovanie_zaciatok?((0,i.wg)(),(0,i.iD)("img",W)):(0,i.kq)("",!0),d.opakovanie_koniec?((0,i.wg)(),(0,i.iD)("img",Q)):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0),d?.basa_drzanie>1?((0,i.wg)(),(0,i.iD)("div",aa,[2==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",{key:0,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/2-dob-basy.svg",alt:"Držanie na 2 doby",class:(0,o.C_)(["doby2-basy",[{"doba2-basy-off":l===t.doby.length-2,"doba2-basy-off3":l===t.doby.length-1,"doba2-basy-off2":0===l}]])},null,2)):(0,i.kq)("",!0),3==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",{key:1,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/3-dob-basy.svg",alt:"Držanie na 3 doby",class:(0,o.C_)(["doby3-basy",{"doba3-basy-off":4===$a.zapisyData.doby&&l===t.doby.length-3,"doba3-basy-off2":l===t.doby.length-2,"doba3-basy-off3":l===t.doby.length-1}])},null,2)):(0,i.kq)("",!0),4==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",{key:2,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/4-dob-basy.svg",alt:"Držanie na 4 doby",class:(0,o.C_)(["doby4-basy",{"doba4-basy-off":4===$a.zapisyData.doby&&l===t.doby.length-3,"doba4-basy-off1":3===$a.zapisyData.doby&&l===t.doby.length-1,"doba4-basy-off2":l===t.doby.length-2,"doba4-basy-off3":4===$a.zapisyData.doby&&l===t.doby.length-1,"doba4-basy-off4":3===$a.zapisyData.doby&&0===l}])},null,2)):(0,i.kq)("",!0),5==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",{key:3,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/5-dob-basy.svg",alt:"Držanie na 5 doby",class:(0,o.C_)(["doby5-basy test",{"doba5-basy-off2":4==$a.zapisyData.doby&&[t.doby.length-3,t.doby.length-2].includes(l)||3==$a.zapisyData.doby&&1===l,"doba5-basy-off1":3==$a.zapisyData.doby&&0==l,"doba5-basy-off3":3==$a.zapisyData.doby&&2==l}])},null,2)):(0,i.kq)("",!0),6==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",{key:4,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/6-dob-basy.svg",alt:"Držanie na 6 doby",class:(0,o.C_)(["doby6-basy",{"doba6-basy-off":4==$a.zapisyData.doby&&1==l,"doba6-basy-off1":4==$a.zapisyData.doby&&2==l,"doba6-basy-off2":4==$a.zapisyData.doby&&3==l,"doba6-basy-off3":3==$a.zapisyData.doby&&1==l,"doba6-basy-off4":3==$a.zapisyData.doby&&2==l}])},null,2)):(0,i.kq)("",!0),7==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",{key:5,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/7-dob-basy.svg",alt:"Držanie na 7 doby",class:(0,o.C_)(["doby7-basy",{"doba7-basy-off-val":3==$a.zapisyData.doby&&0==l,"doba7-basy-off":4==$a.zapisyData.doby&&1==l,"doba7-basy-off1":4==$a.zapisyData.doby&&2==l,"doba7-basy-off2":4==$a.zapisyData.doby&&3==l,"doba7-basy-off3":3==$a.zapisyData.doby&&1==l,"doba7-basy-off4":3==$a.zapisyData.doby&&2==l}])},null,2)):(0,i.kq)("",!0),8==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",{key:6,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/8-dob-basy.svg",alt:"Držanie na 8 doby",class:(0,o.C_)(["doby8-basy",{"doba8-basy-off-val":3==$a.zapisyData.doby&&0==l,"doba8-basy-off":4==$a.zapisyData.doby&&1==l,"doba8-basy-off1":4==$a.zapisyData.doby&&2==l,"doba8-basy-off2":4==$a.zapisyData.doby&&3==l,"doba8-basy-off3":3==$a.zapisyData.doby&&1==l,"doba8-basy-off4":3==$a.zapisyData.doby&&2==l}])},null,2)):(0,i.kq)("",!0),20==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",ea)):(0,i.kq)("",!0),30==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",{key:8,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/3-doby-basy-zac.svg",alt:"Držanie na 3 doby",class:(0,o.C_)(["doba3-basy-rozdelene",{"doba3-basy-rozdelene2":3===$a.zapisyData.doby}])},null,2)):(0,i.kq)("",!0),40==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",ta)):(0,i.kq)("",!0),50==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",{key:10,src:"https://heligonkovaakademia.sk/data/images/generovanieZapisov/5-doby-basy-zac.svg",alt:"Držanie na 5 doby",class:(0,o.C_)(["doba5-basy-rozdelene",{"doba5-basy-rozdelene2":3===$a.zapisyData.doby}])},null,2)):(0,i.kq)("",!0),100==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",ia)):(0,i.kq)("",!0),200==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",sa)):(0,i.kq)("",!0),300==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",oa)):(0,i.kq)("",!0),400==d?.basa_drzanie?((0,i.wg)(),(0,i.iD)("img",na)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)],42,Y),n==a.takty.length-1&&l==t.doby.length-1||n<a.takty.length-1&&!0===(a.takty[n+1].isGhost||!1)&&l==t.doby.length-1?((0,i.wg)(),(0,i.iD)("img",da)):(0,i.kq)("",!0)]),(0,i._)("div",{class:(0,o.C_)([[{"slabo-siva":1==d.farba,"stredne-siva":2==d.farba,"silno-siva":3==d.farba}],"popis"]),onDblclick:a=>Ra.changeColor(d)},null,42,la)],42,f)))),128))],42,m)))),128))]),(0,i._)("div",ra,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.popis,((n,d)=>((0,i.wg)(),(0,i.iD)("div",{key:d,class:(0,o.C_)(["popis",[1==a.popis_farba[d]?"slabo-siva":"",2==a.popis_farba[d]?"stredne-siva":"",3==a.popis_farba[d]?"silno-siva":"",a?.popis_class?.[d]||""]]),onDblclick:e=>Ra.changeColorPopis(a.popis_farba,d,t)},[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e=>a.popis[d]=e,placeholder:a.popis[d]?a.popis[d]:$a.dotSee?"·   ·   ·":"",class:"popis-input",onKeydown:e[10]||(e[10]=a=>Ra.moveToNextInput(a,".popis-input"))},null,40,ha),[[s.nr,a.popis[d]]])],42,ca)))),128))])])],42,b)))),128))]),(0,i._)("div",{style:(0,o.j5)({paddingTop:a.paddingTop+"px"}),class:"information"},[(0,i.wy)((0,i._)("textarea",{name:"text-piesne",ref:"text","onUpdate:modelValue":e[11]||(e[11]=a=>$a.zapisyData.text=a),placeholder:$a.zapisyData.text?$a.zapisyData.text:$a.dotSee?"Žiadny text":"",onInput:e[12]||(e[12]=(...a)=>Ra.adjustTextareaPadding&&Ra.adjustTextareaPadding(...a))},null,40,ya),[[s.nr,$a.zapisyData.text]]),$a.dotSee?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:0,ref:"nazov",type:"text",name:"nazov-piesne",class:"title","onUpdate:modelValue":e[13]||(e[13]=a=>$a.zapisyData.pata=a),placeholder:$a.zapisyData.pata?$a.zapisyData.pata:"Heligónková Akadémia"},null,8,pa)),[[s.nr,$a.zapisyData.pata]]):(0,i.kq)("",!0)],4),$a.dotSee?((0,i.wg)(),(0,i.iD)("div",ka,[(0,i._)("div",ua,[$a.upravovanieZapisu?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ba,[(0,i._)("p",{onClick:e[14]||(e[14]=a=>Ra.ulozitZapis())},"Uložiť číselný zápis")])),$a.upravovanieZapisu?((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,o.C_)([{"not-have-permission":!this.$store.state.userRoles?.roles?.includes("record_edit")},"button"])},[(0,i._)("p",{onClick:e[15]||(e[15]=a=>Ra.upravitZapis())},"Upraviť číselný zápis")],2)):(0,i.kq)("",!0),$a.upravovanieZapisu?((0,i.wg)(),(0,i.iD)("div",{key:2,class:(0,o.C_)([{"not-have-permission":!this.$store.state.userRoles?.roles?.includes("record_delete")},"button red-button"]),onClick:e[16]||(e[16]=a=>Ra.vymazanieZapisu(this.$route.query.id,0))},e[42]||(e[42]=[(0,i._)("p",null,"Skry",-1)]),2)):(0,i.kq)("",!0),$a.upravovanieZapisu?((0,i.wg)(),(0,i.iD)("div",{key:3,class:(0,o.C_)([{"not-have-permission":!this.$store.state.userRoles?.roles?.includes("record_delete")},"button red-button"]),onClick:e[17]||(e[17]=a=>Ra.vymazanieZapisu(this.$route.query.id,1))},e[43]||(e[43]=[(0,i._)("p",null,"Vymaž",-1)]),2)):(0,i.kq)("",!0)]),(0,i._)("div",ga,[(0,i._)("div",{style:(0,o.j5)({zIndex:"Generovať pdf"!==$a.generatingText?-1:1}),class:"button"},[(0,i._)("p",{onClick:e[18]||(e[18]=a=>Ra.generatePDF(4)),style:(0,o.j5)({cursor:"Generovať pdf"!==$a.generatingText?"not-allowed":"pointer"})},(0,o.zw)($a.generatingText)+" (4) ",5)],4),(0,i._)("div",{style:(0,o.j5)({zIndex:"Generovať pdf"!==$a.generatingText?-1:1}),class:"button"},[(0,i._)("p",{onClick:e[19]||(e[19]=a=>Ra.generatePDF(5)),style:(0,o.j5)({cursor:"Generovať pdf"!==$a.generatingText?"not-allowed":"pointer"})},(0,o.zw)($a.generatingText)+" (5) ",5)],4)]),(0,i._)("div",va,[$a.strukturaVlozenie?((0,i.wg)(),(0,i.iD)("p",{key:1,onClick:e[21]||(e[21]=(...a)=>Ra.spravaStruktury&&Ra.spravaStruktury(...a))},"Skryť štruktúru")):((0,i.wg)(),(0,i.iD)("p",{key:0,onClick:e[20]||(e[20]=(...a)=>Ra.spravaStruktury&&Ra.spravaStruktury(...a))}," Zobraziť štruktúru "))]),$a.strukturaVlozenie?(0,i.wy)(((0,i.wg)(),(0,i.iD)("textarea",{key:0,name:"struktura",class:"struktura-textarea",id:"struktura",cols:"30",rows:"10","onUpdate:modelValue":e[22]||(e[22]=a=>$a.strukturaVlozenieText=a)},null,512)),[[s.nr,$a.strukturaVlozenieText]]):(0,i.kq)("",!0),$a.strukturaVlozenie?((0,i.wg)(),(0,i.iD)("div",{key:1,onClick:e[23]||(e[23]=(...a)=>Ra.kopirovanieStruktury&&Ra.kopirovanieStruktury(...a)),class:"button"},e[44]||(e[44]=[(0,i._)("p",null,"Skopírovať štruktúru",-1)]))):(0,i.kq)("",!0),$a.strukturaVlozenie?((0,i.wg)(),(0,i.iD)("div",{key:2,onClick:e[24]||(e[24]=(...a)=>Ra.vlozenieStruktury&&Ra.vlozenieStruktury(...a)),class:"button"},e[45]||(e[45]=[(0,i._)("p",null,"Vložiť štruktúru",-1)]))):(0,i.kq)("",!0),$a.zapisyData.id&&$a.zapisyData.nazov?((0,i.wg)(),(0,i.iD)("button",{key:3,type:"button",onClick:e[25]||(e[25]=(...a)=>Ra.openAddToFolderDialog&&Ra.openAddToFolderDialog(...a)),onKeydown:e[26]||(e[26]=(0,s.D2)((0,s.iM)((()=>{}),["prevent"]),["enter"])),class:"button"}," Pridať do priečinka ",32)):(0,i.kq)("",!0),$a.showAddToFolderModal?((0,i.wg)(),(0,i.j4)(qa,{key:4,item:$a.addToFolderItem,folders:$a.addToFolderFolders,onClose:e[27]||(e[27]=a=>$a.showAddToFolderModal=!1),onConfirm:Ra.handleAddToFolderConfirm,onDone:a.onAddToFolderDone},null,8,["item","folders","onConfirm","onDone"])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)],512),[[s.F8,!$a.showModal]])],32),(0,i.Wm)(s.uT,{name:"radial-overlay-fade"},{default:(0,i.w5)((()=>[$a.contextMenuVisible?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"radial-context-menu-backdrop",onMousedown:e[35]||(e[35]=(...a)=>Ra.hideContextMenu&&Ra.hideContextMenu(...a))},[(0,i._)("div",{class:"radial-context-menu",style:(0,o.j5)({top:$a.contextMenuY+"px",left:$a.contextMenuX+"px"})},[(0,i._)("div",{class:"radial-overlay",style:(0,o.j5)({width:$a.radialSize+"px",height:$a.radialSize+"px"}),onMousedown:e[33]||(e[33]=(0,s.iM)((()=>{}),["stop"])),onClick:e[34]||(e[34]=(0,s.iM)((()=>{}),["stop"]))},[((0,i.wg)(),(0,i.iD)("svg",{class:"radial-menu",viewBox:Ra.radialViewBox,role:"menu",xmlns:"http://www.w3.org/2000/svg"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Ra.visibleRadialItems,((a,t)=>((0,i.wg)(),(0,i.iD)("g",{key:a.id||t,class:(0,o.C_)(["radial-sector",{selected:$a.radialSelection&&$a.radialSelection.id===a.id}]),role:"menuitem",tabindex:"0",onClick:(0,s.iM)((e=>Ra.handleRadialSectorClick(a)),["stop"]),onKeydown:[(0,s.D2)((0,s.iM)((e=>Ra.handleRadialSectorClick(a)),["prevent"]),["enter"]),(0,s.D2)((0,s.iM)((e=>Ra.handleRadialSectorClick(a)),["prevent"]),["space"])],onMouseenter:e=>Ra.handleRadialSectorHover(a),onMouseleave:e[29]||(e[29]=(...a)=>Ra.clearRadialHover&&Ra.clearRadialHover(...a))},[(0,i._)("path",{d:Ra.radialSectorPath(t)},null,8,za),(0,i._)("g",{class:"radial-icon",transform:Ra.radialIconTransform(t)},[Ra.showRadialInnerText(a)?((0,i.wg)(),(0,i.iD)("text",xa,(0,o.zw)(Ra.getRadialInnerText(a)),1)):(0,i.kq)("",!0)],8,Da),(0,i._)("g",{class:"radial-label",transform:Ra.radialLabelTransform(t)},[Ra.radialItemHasIcon(a)&&0===$a.radialPath.length?((0,i.wg)(),(0,i.iD)("foreignObject",_a,[(0,i._)("div",{class:"radial-label-icon",xmlns:"http://www.w3.org/1999/xhtml",innerHTML:a.icon},null,8,Ca)])):((0,i.wg)(),(0,i.iD)("text",Ta,(0,o.zw)(Ra.getRadialItemLabel(a)),1))],8,wa)],42,fa)))),128)),(0,i._)("g",{class:"radial-center",role:"button",tabindex:"0",onClick:e[30]||(e[30]=(0,s.iM)(((...a)=>Ra.handleRadialCenterClick&&Ra.handleRadialCenterClick(...a)),["stop"])),onKeydown:[e[31]||(e[31]=(0,s.D2)((0,s.iM)(((...a)=>Ra.handleRadialCenterClick&&Ra.handleRadialCenterClick(...a)),["prevent"]),["enter"])),e[32]||(e[32]=(0,s.D2)((0,s.iM)(((...a)=>Ra.handleRadialCenterClick&&Ra.handleRadialCenterClick(...a)),["prevent"]),["space"]))]},[(0,i._)("circle",{cx:Ra.radialCenter,cy:Ra.radialCenter,r:$a.radialInnerRadius-15},null,8,Sa),(0,i._)("text",{x:Ra.radialCenter,y:Ra.radialCenter,"text-anchor":"middle","dominant-baseline":"middle"},(0,o.zw)(Ra.radialCenterLabel),9,Na)],32)],8,ma))],36)],4)],32)):(0,i.kq)("",!0)])),_:1})],40,n)}t(560);var $a=t(906),Ra=t(1076);const qa=2*Math.PI;function Za(a,e,t,i){return{x:+(a+t*Math.cos(i)).toFixed(3),y:+(e+t*Math.sin(i)).toFixed(3)}}function Ia(a,e,t,i,s,o){const n=Za(a,e,i,s),d=Za(a,e,i,o),l=Za(a,e,t,o),r=Za(a,e,t,s),c=o-s>Math.PI?1:0;return[`M ${n.x} ${n.y}`,`A ${i} ${i} 0 ${c} 1 ${d.x} ${d.y}`,`L ${l.x} ${l.y}`,`A ${t} ${t} 0 ${c} 0 ${r.x} ${r.y}`,"Z"].join(" ")}var Va={components:{AddToFolderDialog:$a.Z},mounted(){window.scrollTo(0,0);const a="font-awesome-cdn";if(!document.getElementById(a)){const e=document.createElement("link");e.id=a,e.rel="stylesheet",e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css",e.integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==",e.crossOrigin="anonymous",e.referrerPolicy="no-referrer",document.head.appendChild(e)}"undefined"!==typeof this.$route.query.id&&(this.upravovanieZapisu=!0,this.nacitajDataZapisu(this.$route.query.id));let e=document.querySelector("textarea");e.addEventListener("input",(()=>{this.autoResize()})),window.addEventListener("resize",(()=>{this.autoResize()})),window.addEventListener("keydown",this.handleKeyboardShortcuts),this.upravovanieZapisu?(this.showModal=!1,setTimeout((()=>{this.nacitajVysky()}),500)):this.addPart()},beforeUnmount(){window.removeEventListener("keydown",this.handleKeyboardShortcuts)},data(){return{zapisyData:{riadky:2,doby:4},upravovanieZapisu:"undefined"!==typeof this.$route.query.id,showModal:!0,contextMenuVisible:!1,contextMenuX:0,contextMenuY:0,radialPath:[],radialSelection:null,radialHoveredItem:null,radialSize:420,radialInnerRadius:95,radialOuterRadius:190,selectedRiadok:null,selectedRiadokIndex:0,selectedBass:null,selectedCast:null,selectedDoba:null,selectedTakt:null,dotSee:!0,pageNumber:1,pageNumberOffset:0,a4Height:0,countdownInterval:null,generatingText:"Generovať pdf",pocetCasti:4,dataNoty:{pocetTaktov:15,casty:[]},strukturaVlozenie:!1,strukturaVlozenieText:"",folders:[],showAddToFolderModal:!1,addToFolderItem:null,addToFolderFolders:[]}},methods:{async openAddToFolderDialog(){const a=await this.fetchFolders(),e=this.zapisyData.id,t=await Promise.all(a.map((async a=>{try{const t=await Ra["default"].get(this.$store.state.api+"/folder/list.php",{params:{name:a}}),i=Array.isArray(t.data?.data)?t.data.data:[],s=i.includes(String(e));return{name:a,checked:s}}catch(t){return{name:a,checked:!1}}})));this.addToFolderItem={id:e,nazov:this.zapisyData.nazov},this.addToFolderFolders=t,this.showAddToFolderModal=!0},async fetchFolders(){try{const a=await Ra["default"].get(this.$store.state.api+"/folder/list.php");return Array.isArray(a.data.data)?a.data.data:[]}catch(a){return[]}},handleAddToFolderConfirm(){this.showAddToFolderModal=!1,this.$store.state.SnackBarText="Zápis pridaný do priečinkov!"},formatDobaLabel(a){return 1===a?"dobu":a>=2&&a<=4?"doby":"dôb"},handleRadialSectorHover(a){this.radialHoveredItem=a},clearRadialHover(){this.radialHoveredItem=null},handleRadialSectorClick(a){this.clearRadialHover(),a.items&&a.items.length?this.radialPath=[...this.radialPath,a]:(this.radialSelection=a,this.triggerRadialAction(a.action))},handleRadialCenterClick(){this.clearRadialHover(),this.radialPath.length?this.radialPath=this.radialPath.slice(0,-1):this.hideContextMenu()},getRadialItemLabel(a){if(!a)return"";const e=[a.title,a.innerLabel];for(const t of e)if("string"===typeof t&&t.trim())return t.trim();if("string"===typeof a.icon){const e=a.icon.trim();if(e&&!e.includes("<"))return e}return"string"===typeof a.id&&a.id.trim()?a.id.trim().replace(/[-_]+/g," ").replace(/\s+/g," ").replace(/\b\w/g,(a=>a.toUpperCase())):""},radialItemHasIcon(a){return!!a&&"string"===typeof a.icon&&a.icon.includes("<")},showRadialInnerText(a){return!!a&&(!("string"!==typeof a.innerLabel||!a.innerLabel.trim())||!(this.radialItemHasIcon(a)&&0===this.radialPath.length))},getRadialInnerText(a){return a?"string"===typeof a.innerLabel&&a.innerLabel.trim()?a.innerLabel.trim():this.radialItemHasIcon(a)&&0===this.radialPath.length?"":this.getRadialItemLabel(a):""},radialSectorPath(a){const e=-Math.PI/2+this.radialAngleStep*a,t=e+this.radialAngleStep;return Ia(this.radialCenter,this.radialCenter,this.radialInnerRadius,this.radialOuterRadius,e,t)},radialIconTransform(a){const e=-Math.PI/2+this.radialAngleStep*a+this.radialAngleStep/2,t=(this.radialInnerRadius+this.radialOuterRadius)/2,{x:i,y:s}=Za(this.radialCenter,this.radialCenter,t,e);return`translate(${i}, ${s})`},radialLabelTransform(a){const e=-Math.PI/2+this.radialAngleStep*a+this.radialAngleStep/2,t=(this.radialInnerRadius+this.radialOuterRadius)/2,{x:i,y:s}=Za(this.radialCenter,this.radialCenter,t,e);return`translate(${i}, ${s})`},triggerRadialAction(a){"function"===typeof a&&a(),this.hideContextMenu()},handleKeyboardShortcuts(a){const e=document.activeElement,t="INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable;if(t)return;const i=(a.ctrlKey||a.metaKey)&&"c"===a.key.toLowerCase()&&!a.shiftKey,s=(a.ctrlKey||a.metaKey)&&"v"===a.key.toLowerCase()&&!a.shiftKey,o=(a.ctrlKey||a.metaKey)&&"c"===a.key.toLowerCase()&&a.shiftKey,n=(a.ctrlKey||a.metaKey)&&"v"===a.key.toLowerCase()&&a.shiftKey;i&&(a.preventDefault(),this.copyTakt()),s&&(a.preventDefault(),this.pasteTakt()),o&&(a.preventDefault(),this.copyCast()),n&&(a.preventDefault(),this.pasteCast())},vlozenieStruktury(){try{this.dataNoty=JSON.parse(this.strukturaVlozenieText),this.$store.state.SnackBarText="Štruktúra bola úspešne vložená"}catch(a){this.$store.state.SnackBarText="Neplatný formát štruktúry"}this.spravaStruktury()},kopirovanieStruktury(){this.generujStrukturu(),navigator.clipboard.writeText(this.strukturaVlozenieText).then((()=>{this.$store.state.SnackBarText="Štruktúra bola skopirovaná do schránky"})).catch((()=>{this.$store.state.SnackBarText="Nepodarilo sa skopírovať štruktúru"}))},spravaStruktury(){1==this.strukturaVlozenie?this.strukturaVlozenie=!1:this.strukturaVlozenie=!0,this.generujStrukturu()},generujStrukturu(){this.strukturaVlozenieText=JSON.stringify(this.dataNoty,null)},changeValue(a){""==a?a="0":"0"==a&&(a="")},nacitajVysky(){setTimeout((()=>{this.autoResize(),this.adjustTextareaPadding()}),300)},autoResize(){let a=document.querySelector("textarea");a.style.height="auto",a.style.height=a.scrollHeight+10+"px"},updatePageNumber(){let a=this.dataNoty.casty.length;this.pageNumber=Math.ceil(a/this.pocetCasti)+this.pageNumberOffset},updateAllRiadky(){this.dataNoty.casty.forEach((a=>{a.takty.forEach((a=>{a.doby.forEach((a=>{a.riadky=this.createRiadky(this.zapisyData.riadky)}))}))}))},adjustTextareaPadding(){var a=798,e=0;this.a4Height=a;const t=this.$refs.text,i=1.2*t.scrollHeight;let s=this.a4Height-i;const o=this.dataNoty.casty.length%this.pocetCasti;this.dataNoty.casty.length%this.pocetCasti==0&&(e=160);var n=235*o;1==o?n=330:2==o?n=426:3==o&&(n=681),this.paddingTop=s-n+e,this.paddingTop<25&&(this.paddingTop=this.paddingTop+a)},pridajVsetkyDoby(){this.dataNoty.casty.forEach((a=>{this.adjustTaktyCount(a.takty,this.zapisyData.doby),a.takty.forEach((a=>{this.adjustDobyCount(a.doby,this.zapisyData.doby)}))}))},adjustTaktyCount(a,e){this.vypocitajPocetTaktov();const t=Math.floor(this.dataNoty.pocetTaktov/e);while(a.length<t)a.push({doby:[],isGhost:!1});while(a.length>t)a.pop()},vypocitajPocetTaktov(){4==this.zapisyData.doby?this.dataNoty.pocetTaktov=16:2==this.zapisyData.doby?this.dataNoty.pocetTaktov=14:5==this.zapisyData.doby?this.dataNoty.pocetTaktov=15:6==this.zapisyData.doby&&(this.dataNoty.pocetTaktov=18)},adjustDobyCount(a,e){while(a.length<e)a.push(this.createDoba());while(a.length>e)a.pop()},createDoba(){return{riadky:this.createRiadky(this.zapisyData.riadky),opakovanie_zaciatok:!1,opakovanie_koniec:!1,text:"",basa:"",basa_drzanie:"",basa_index:"0",smer_pravo:!1,smer_vlavo:!1,farba:0,isGhost:!1}},createRiadky(a){return Array.from({length:a},(()=>({drzanie:1,hodnota_cisla:[{cela_gulicka:[{cislo:"",index:"0"}],poddoba:[]}]})))},nacitajDataZapisu(a){const e=t(7218),i=t(6237);let s=new i,o={method:"get",maxBodyLength:1/0,url:this.$store.state.api+"/noty/load.php?id="+a,data:s};e.request(o).then((a=>{"Request succesfull"==a.data.status&&(this.zapisyData.doby=a.data.data.pocet_dob,this.zapisyData.riadky=a.data.data.pocet_riadkov,this.zapisyData.id=a.data.data.id,this.zapisyData.nazov=a.data.data.nazov,this.zapisyData.stupnica=a.data.data.stupnica,this.zapisyData.autor=a.data.data.autor,this.zapisyData.text=a.data.data.text_piesne,this.zapisyData.pata=a.data.data.pata,this.zapisyData.pocet_casti=a.data.data.pocet_casti,this.zapisyData.productID=a.data.data.product_id,this.dataNoty=JSON.parse(a.data.data.data))})).catch((a=>{}))},generatePDF(a){this.pocetCasti=a,this.dotSet(!1),this.nacitajVysky(),setTimeout((async()=>{const a=t(7218),e=t(6237);let i=new e;var s=this.$refs.htmlContent.innerHTML;const o="https://heligonkovaakademia.sk/data/styles/generovanieZapisov.css";async function n(a){const e=await fetch(a);if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return await e.text()}try{const e=await n(o),t=`\n          \n        \n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n          <meta charset="UTF-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1.0">\n          <title>Document</title>\n          <style>\n                ${e}\n          </style>\n      </head>\n      <body>\n    \n        <div>\n          <section>${s}</section>\n        </div>\n        </body>\n      </html>\n      `;i.append("input",t),i.append("id",Number(this.zapisyData.id));let d={method:"post",maxBodyLength:1/0,url:this.$store.state.api+"/noty/html2pdf/html_input2pdf.php",data:i};a.request(d).then((a=>{})).catch((a=>{}))}catch(d){}}),300),setTimeout((()=>{this.dotSet(!0),this.startGenerating()}),600)},generateSequence(a){const e=[5,3];for(let t=2;t<a;t++){const a=e[t-1];e.push(1.02*a)}return e},startGenerating(){this.sequence=this.generateSequence(this.dataNoty.casty.length);let a=Math.round(this.sequence.reduce(((a,e)=>a+e),0)),e=a;this.generatingText=`Zostáva ${a} sekúnd`,this.countdownInterval=setInterval((()=>{a--,a>1?this.generatingText=`Zostáva ${a} sekúnd`:1===a?this.generatingText="Zostáva 1 sekunda":(this.generatingText="Vygenerované",clearInterval(this.countdownInterval))}),1e3),setTimeout((()=>{this.generatingText="Generovať pdf",setTimeout((()=>{window.open("https://heligonkovaakademia.sk/api/noty/load_pdf.php?id="+Number(this.zapisyData.id),"_blank")}),300)}),1e3*(e+1))},upravitZapis(){const a=t(7218),e=t(6237);let i=new e;i.append("id",Number(this.zapisyData.id)),i.append("data",JSON.stringify(this.dataNoty)),i.append("nazov",this.zapisyData.nazov||"Číselný zápis"),i.append("autor",this.zapisyData.autor||"Neznámy autor"),i.append("stupnica",this.zapisyData.stupnica||"C dur"),i.append("pocet_casti",this.dataNoty.casty.length),i.append("pocet_dob",this.zapisyData.doby),i.append("pocet_riadkov",this.zapisyData.riadky),i.append("text_piesne",this.zapisyData.text||""),i.append("pata",this.zapisyData.pata||"Heligónková akadémia"),i.append("product_id",this.zapisyData.productID||0);let s={method:"post",maxBodyLength:1/0,url:this.$store.state.api+"/noty/update.php",data:i};a.request(s).then((a=>{"Request fullfiled"==a.data.status?(this.$store.state.SnackBarText="Číselný zápis bol úspešne uložený",this.$router.go(-1)):this.$store.state.SnackBarText="Nepodarilo sa uložiť číslený zápis"})).catch((a=>{this.$store.state.SnackBarText="Nepodarilo sa uložiť číslený zápis"}))},ulozitZapis(){const a=t(7218),e=t(6237);let i=new e;i.append("data",JSON.stringify(this.dataNoty)),i.append("nazov",this.zapisyData.nazov||"Číselný zápis"),i.append("autor",this.zapisyData.autor||"Neznámy autor"),i.append("stupnica",this.zapisyData.stupnica||"C dur"),i.append("pocet_casti",this.dataNoty.casty.length),i.append("pocet_dob",this.zapisyData.doby),i.append("pocet_riadkov",this.zapisyData.riadky),i.append("text_piesne",this.zapisyData.text||""),i.append("pata",this.zapisyData.pata||"Heligónková akadémia");let s={method:"post",maxBodyLength:1/0,url:this.$store.state.api+"/noty/create.php",data:i};a.request(s).then((a=>{"Request fullfiled"==a.data.status?(this.$store.state.SnackBarText="Číselný zápis bol úspešne vytvorený",this.$router.go(-1)):this.$store.state.SnackBarText="Nepodarilo sa vytvoriť číslený zápis"})).catch((a=>{this.$store.state.SnackBarText="Nepodarilo sa vytvoriť číslený zápis"}))},vymazanieZapisu(a,e){const i=t(7218),s=t(6237);let o=new s,n="";1==e&&(n="&permanent=true");let d={method:"get",maxBodyLength:1/0,url:this.$store.state.api+"/noty/delete.php?id="+a+n,data:o};i.request(d).then((a=>{"Request fullfiled"==a.data.status?(this.$store.state.SnackBarText="Vymazanie zápisu bolo úspešné",this.$router.go(-1)):this.$store.state.SnackBarText="Nepodarilo sa vymazať zápis"})).catch((a=>{}))},submitForm(){this.showModal=!1,this.pridajVsetkyDoby(),this.nacitajVysky()},addInput(a){a.cela_gulicka.length<4?"0"==a.cela_gulicka[0].index?a.cela_gulicka.push({cislo:"",index:"0"}):a.cela_gulicka.push({cislo:"",index:""}):this.$store.state.SnackBarText="Nieje možné pridať viacej ako 4 riadky"},deleteInput(a,e){a.cela_gulicka.length>1?a.cela_gulicka.splice(e,1):this.$store.state.SnackBarText="Nie je možné odstrániť posledný riadok."},getInputClass(a){const e=a.cela_gulicka.length;return 1===e?"jedna-cisla":2===e?"dva-cisla":3===e?"tri-cisla":4===e?"styri-cisla":""},checkContextMenu(a){a.target.closest(".riadok")||this.showContextMenu(a)},showContextMenu(a){this.selectedRiadok=null,this.selectedRiadokIndex=0,this.contextMenuX=a.pageX,this.contextMenuY=a.pageY,this.radialPath=[],this.radialSelection=null,this.clearRadialHover(),this.contextMenuVisible=!0,document.addEventListener("click",this.hideContextMenu)},showContextMenuRiadok(a,e,t){this.contextMenuX=a.pageX,this.contextMenuY=a.pageY,this.radialPath=[],this.radialSelection=null,this.clearRadialHover(),this.contextMenuVisible=!0,void 0!=e?(this.selectedRiadok=e,this.selectedRiadokIndex=t):(this.selectedRiadok=null,this.selectedRiadokIndex=0),setTimeout((()=>{document.addEventListener("click",this.hideContextMenu)}),0)},showContextMenuBass(a,e){this.contextMenuX=a.pageX,this.contextMenuY=a.pageY,this.radialPath=[],this.radialSelection=null,this.clearRadialHover(),this.contextMenuVisible=!0,this.selectedBass=void 0!=e?e:null,setTimeout((()=>{document.addEventListener("click",this.hideContextMenu)}),0)},showContextMenuDoba(a,e){this.contextMenuX=a.pageX,this.contextMenuY=a.pageY,this.radialPath=[],this.radialSelection=null,this.clearRadialHover(),this.contextMenuVisible=!0,this.selectedDoba=void 0!=e?e:null,setTimeout((()=>{document.addEventListener("click",this.hideContextMenu)}),0)},showContextMenuTakt(a,e){this.contextMenuX=a.pageX,this.contextMenuY=a.pageY,this.radialPath=[],this.radialSelection=null,this.clearRadialHover(),this.contextMenuVisible=!0,this.selectedTakt=void 0!=e?e:null,setTimeout((()=>{document.addEventListener("click",this.hideContextMenu)}),0)},showContextMenuCast(a,e){this.contextMenuX=a.pageX,this.contextMenuY=a.pageY,this.radialPath=[],this.radialSelection=null,this.clearRadialHover(),this.contextMenuVisible=!0,this.selectedCast=void 0!=e?e:null,setTimeout((()=>{document.addEventListener("click",this.hideContextMenu)}),0)},hideContextMenu(){this.contextMenuVisible=!1,this.selectedRiadok=null,this.selectedRiadokIndex=0,this.selectedBass=null,this.selectedCast=null,this.selectedDoba=null,this.selectedPopis=null,this.selectedTakt=null,this.radialPath=[],this.radialSelection=null,this.clearRadialHover(),document.removeEventListener("click",this.hideContextMenu)},dotSet(a){this.dotSee=a},handleKeyDown(a,e){if("ArrowRight"===a.key){a.preventDefault(),e.smer="";const t=a.target.selectionStart;"string"===typeof e.smer&&(e.smer=e.smer.slice(0,t)+">"+e.smer.slice(t),this.$nextTick((()=>{a.target.selectionStart=a.target.selectionEnd=t+1})),this.checkSmer(e))}else if("ArrowLeft"===a.key){a.preventDefault(),e.smer="";const t=a.target.selectionStart;"string"===typeof e.smer&&(e.smer=e.smer.slice(0,t)+"<"+e.smer.slice(t),this.$nextTick((()=>{a.target.selectionStart=a.target.selectionEnd=t+1}))),this.checkSmer(e)}},addHoldingBass(a){if(this.selectedBass){this.selectedBass.basa_drzanie=a;let e=!1;a<100&&(a=Math.abs(a)/(a>10?20:1)),a>=100&&(a/=200,e=!0),this.contextMenuVisible=!1;for(let t of this.dataNoty.casty)if(Array.isArray(t.takty)){let i=null,s=null;for(let a of t.takty){for(let e of a.doby)if(e===this.selectedBass){i=a,s=e;break}if(i&&s)break}if(i&&s){let o=i.doby.indexOf(s);if(e){if(e){let e=a-1;for(let a=t.takty.indexOf(i);a>=0&&e>0;a--){let i=t.takty[a];for(let a=i.doby.length-1;a>=0&&e>0;a--)i.doby[a]&&(i.doby[a].basa="0",e--)}}}else{let e=a-1,s=t.takty.indexOf(i),n=o+1;while(e>0&&s<t.takty.length){const a=t.takty[s];while(n<a.doby.length&&e>0)a.doby[n].basa="0",n++,e--;s++,n=0}}}}this.selectedBass=null}},addHolding(a){if(this.selectedRiadok){this.selectedRiadok.drzanie=a;let e=!1;a<190&&(a=Math.abs(a)/(a>12?20:1)),a>=190&&(a/=200,e=!0),this.contextMenuVisible=!1;for(let t of this.dataNoty.casty)if(Array.isArray(t.takty)){let i=null,s=null;for(let a of t.takty){for(let e of a.doby)if(e.riadky.includes(this.selectedRiadok)){i=a,s=e;break}if(i&&s)break}if(i&&s){let o=i.doby.indexOf(s);e?e&&this.moveLeft(t,i,s,o,Math.abs(a)):this.moveRight(t,i,s,o,a)}}this.selectedRiadok=null,this.selectedRiadokIndex=0}},moveRight(a,e,t,i,s){let o=i+s,n=s-1,d=n;for(let l=i+1;l<o;l++){if(e.doby[l]){const a=e.doby[l].riadky[this.selectedRiadokIndex];a&&(a.hodnota_cisla.forEach((a=>{a.cela_gulicka.forEach((a=>{a.cislo="0"}))})),n--,d--)}if(l>=e.doby.length){const t=a.takty.indexOf(e)+1;if(a.takty[t]){const e=a.takty[t];for(let a=0;a<n;a++){const t=e.doby[a]?.riadky[this.selectedRiadokIndex];t&&(t.hodnota_cisla.forEach((a=>{a.cela_gulicka.forEach((a=>{a.cislo="0"}))})),d--)}}}if(l>=e.doby.length){const t=a.takty.indexOf(e)+2;if(a.takty[t]){const e=a.takty[t];for(let a=0;a<d;a++){const t=e.doby[a]?.riadky[this.selectedRiadokIndex];t&&t.hodnota_cisla.forEach((a=>{a.cela_gulicka.forEach((a=>{a.cislo="0"}))}))}}}}},moveLeft(a,e,t,i,s){let o=s-1;for(let n=a.takty.indexOf(e);n>=0&&o>0;n--){const t=a.takty[n];for(let s=n===a.takty.indexOf(e)?i-1:t.doby.length-1;s>=0&&o>0;s--)if(t.doby[s]){const a=t.doby[s].riadky[this.selectedRiadokIndex];a&&(a.hodnota_cisla.forEach((a=>{a.cela_gulicka.forEach((a=>{a.cislo="0"}))})),o--)}}},addPart(){this.vypocitajPocetTaktov();const a=Math.floor(this.dataNoty.pocetTaktov/this.zapisyData.doby),e={takty:[],popis:["",""],popis_farba:[0,0],popis_class:[0,0]};for(let t=0;t<a;t++){const a={doby:[],isGhost:!1};for(let e=0;e<this.zapisyData.doby;e++)a.doby.push(this.createDoba(this.zapisyData.doby));e.takty.push(a)}this.dataNoty.casty.push(e),this.hideContextMenu(),this.adjustTextareaPadding()},addOpakovanie(a){"zaciatok"==a?(this.selectedDoba.opakovanie_zaciatok=!0,this.selectedDoba.opakovanie_koniec=!1):"koniec"==a?(this.selectedDoba.opakovanie_zaciatok=!1,this.selectedDoba.opakovanie_koniec=!0):(this.selectedDoba.opakovanie_zaciatok=!1,this.selectedDoba.opakovanie_koniec=!1)},addPopis(a,e,t,i,s){if(this.dataNoty.casty[this.selectedCast].popis=[],this.dataNoty.casty[this.selectedCast].popis_farba=[],this.dataNoty.casty[this.selectedCast].popis_class=[],s){for(let e=0;e<a;e++)this.dataNoty.casty[this.selectedCast].popis.push(""),this.dataNoty.casty[this.selectedCast].popis_farba.push(0),this.dataNoty.casty[this.selectedCast].popis_class.push("");for(let a=0;a<e;a++)this.dataNoty.casty[this.selectedCast].popis.push(""),this.dataNoty.casty[this.selectedCast].popis_farba.push(0),this.dataNoty.casty[this.selectedCast].popis_class.push(i);for(let a=0;a<t;a++)this.dataNoty.casty[this.selectedCast].popis.push(""),this.dataNoty.casty[this.selectedCast].popis_farba.push(0),this.dataNoty.casty[this.selectedCast].popis_class.push()}else{for(let a=0;a<e;a++)this.dataNoty.casty[this.selectedCast].popis.push(""),this.dataNoty.casty[this.selectedCast].popis_farba.push(0),this.dataNoty.casty[this.selectedCast].popis_class.push(i);for(let e=0;e<a;e++)this.dataNoty.casty[this.selectedCast].popis.push(""),this.dataNoty.casty[this.selectedCast].popis_farba.push(0),this.dataNoty.casty[this.selectedCast].popis_class.push("")}},removePart(){this.dataNoty.casty.splice(this.selectedCast,1),this.hideContextMenu(),this.adjustTextareaPadding()},checkSmer(a){">"===a.smer.trim()?(a.smer_pravo=!0,a.smer_vlavo=!1):"<"===a.smer.trim()?(a.smer_pravo=!1,a.smer_vlavo=!0):(a.smer_pravo=!1,a.smer_vlavo=!1)},copyTakt(){if(this.selectedTakt)try{const a=JSON.stringify(this.selectedTakt);navigator.clipboard.writeText(a).then((()=>{this.$store.state.SnackBarText="Takt bol skopírovaný do schránky!"})).catch((a=>{this.$store.state.SnackBarText="Nepodarilo sa skopírovať takt!"}))}catch(a){this.$store.state.SnackBarText="Chyba pri spracovaní taktu!"}else this.$store.state.SnackBarText="Žiadny takt na kopírovanie!"},copyCast(){var a=this.selectedCast;if(null!==a&&void 0!==a)try{const e=this.dataNoty.casty[a];if(!e)return void(this.$store.state.SnackBarText="Neplatný index časti!");const t=JSON.stringify(e);navigator.clipboard.writeText(t).then((()=>{this.$store.state.SnackBarText="Časť bola skopírovaná do schránky!"}))}catch(e){this.$store.state.SnackBarText="Nepodarilo sa skopírovať časť!"}else this.$store.state.SnackBarText="Žiadna časť na kopírovanie!"},async pasteTakt(){const a=this.selectedTakt;try{const e=await navigator.clipboard.readText(),t=JSON.parse(e);if(!t||!Array.isArray(t.doby))return void(this.$store.state.SnackBarText="Neplatné dáta v schránke!");let i=null,s=null;for(let o=0;o<this.dataNoty.casty.length;o++){for(let e=0;e<this.dataNoty.casty[o].takty.length;e++)if(this.dataNoty.casty[o].takty[e]===a){s=o,i=e;break}if(null!==i)break}if(null===i||null===s)return void(this.$store.state.SnackBarText="Nepodarilo sa nájsť takt v štruktúre!");this.dataNoty.casty[s].takty[i]=t,this.$store.state.SnackBarText="Takt bol úspešne nahradený!",this.$forceUpdate()}catch(e){this.$store.state.SnackBarText="Nepodarilo sa prilepiť takt!"}},async pasteCast(){var a=this.selectedCast;if(null!==a&&void 0!==a)try{const e=await navigator.clipboard.readText(),t=JSON.parse(e);if(!t||!Array.isArray(t.takty))return void(this.$store.state.SnackBarText="Neplatné dáta v schránke!");if(!this.dataNoty.casty[a])return void(this.$store.state.SnackBarText="Neplatný index časti!");this.dataNoty.casty[a]=t,this.$store.state.SnackBarText="Časť bola úspešne nahradená!",this.$forceUpdate()}catch(e){this.$store.state.SnackBarText="Nepodarilo sa prilepiť časť!"}else this.$store.state.SnackBarText="Žiadna časť na prilepenie!"},setIndex(a,e){if("takt"==e){const e=this.selectedTakt;e&&Array.isArray(e.doby)?e.doby.forEach((e=>{e.riadky.forEach((e=>{e.hodnota_cisla.forEach((e=>{e.cela_gulicka.forEach((e=>{e.index=""+a}))}))})),e.basa_index=""+a})):this.$store.state.SnackBarText="Nedajú sa pridať indexy do vybraného taktu"}else Array.isArray(this.dataNoty.casty)?this.dataNoty.casty.forEach((e=>{Array.isArray(e.takty)&&e.takty.forEach((e=>{Array.isArray(e.doby)&&e.doby.forEach((e=>{e.riadky.forEach((e=>{e.hodnota_cisla.forEach((e=>{e.cela_gulicka.forEach((e=>{""!=a||0!=e.index&&""!=e.index&&"0"!=e.index||(e.index=""+a)}))}))})),""!=a||0!=e.basa_index&&""!=e.basa_index&&"0"!=e.basa_index||(e.basa_index=""+a)}))}))})):this.$store.state.SnackBarText="Nepodarilo sa nájsť štruktúru častí skladby"},setGhost(a,e){var t=this.selectedTakt,i=this.selectedDoba;"takt"===e?t.isGhost="hide"===a:i.isGhost="hide"===a},changeColor(a){var e=a.farba;0==e||1==e?e++:e=0,a.farba=e},changeColorPopis(a,e,t){var i=a[e];0==i||1==i||2==i?i++:i=0,this.dataNoty.casty[t].popis_farba[e]=i},moveToNextInput(a,e){const t=document.querySelectorAll(e),i=Array.prototype.indexOf.call(t,a.target);if(("ArrowDown"===a.key||"Tab"===a.key&&!a.shiftKey)&&-1!==i&&i<t.length-1)a.preventDefault(),t[i+1].focus();else if("ArrowUp"===a.key||"Tab"===a.key&&a.shiftKey&&i>0){a.preventDefault();const e=t[i-1];e.focus();const s=e.value.length;e.setSelectionRange(s,s)}}},watch:{"dataNoty.casty":{handler(){this.updatePageNumber()},deep:!0},contextMenuVisible(a){a||(this.radialPath=[],this.radialSelection=null,this.radialHoveredItem=null)}},computed:{radialRootItems(){const a=[],e=(a,e,t,i,s=null)=>({id:a,title:e,innerLabel:i,action:t,icon:s});if(this.selectedRiadok||(a.push(e("Pridať-časť","",(()=>this.addPart()),"",'<i class="fa-solid fa-plus"></i>')),this.selectedCast&&a.push(e("Vymazať-časť","",(()=>this.removePart()),"",'<i class="fa-solid fa-minus"></i>'))),this.selectedRiadok){const t=Array.from({length:12},((a,t)=>{const i=t+1;return e(`holding-${i}`,`Držanie ${i} ${this.formatDobaLabel(i)}`,(()=>this.addHolding(i)),`${i}`)})),i=[{value:20,label:"",inner:"1"},{value:40,label:"",inner:"2"},{value:60,label:"",inner:"3"},{value:80,label:"",inner:"4"},{value:100,label:"",inner:"5"},{value:120,label:"",inner:"6"},{value:140,label:"",inner:"7"},{value:200,label:"",inner:"-1"},{value:400,label:"",inner:"-2"},{value:600,label:"",inner:"-3"},{value:800,label:"",inner:"-4"},{value:1e3,label:"",inner:"-5"},{value:1200,label:"",inner:"-6"},{value:1400,label:"",inner:"-7"}].map(((a,t)=>e(`holding-extended-${t}`,a.label,(()=>this.addHolding(a.value)),a.inner)));a.push({id:"holding-full",title:"Držanie tónu",icon:'<i class="fa-solid fa-l fa-rotate-90"></i>',items:t}),a.push({id:"holding-extended",title:"Držanie tónu neskončené",icon:'<i class="fa-solid fa-l fa-rotate-90"></i><i class="fa-solid fa-l fa-flip-vertical fa-rotate-by" style="--fa-rotate-angle: -90deg;"></i>',items:i})}if(this.selectedBass){const t=Array.from({length:8},((a,t)=>{const i=t+1;return e(`bass-holding-${i}`,`Držanie ${i} ${this.formatDobaLabel(i)}`,(()=>this.addHoldingBass(i)),`${i}`)})),i=[{value:20,label:"",inner:"2"},{value:30,label:"",inner:"3"},{value:40,label:"",inner:"4"},{value:50,label:"",inner:"5"},{value:100,label:"",inner:"-1"},{value:200,label:"",inner:"-2"},{value:300,label:"",inner:"-3"},{value:400,label:"",inner:"-4"}].map(((a,t)=>e(`bass-holding-extended-${t}`,a.label,(()=>this.addHoldingBass(a.value)),a.inner)));a.push({id:"bass-holding",icon:'<i class="fa-solid fa-l fa-rotate-270"></i>',items:t}),a.push({id:"bass-holding-extended",title:"Držanie neskončené basy",innerLabel:"Basy ∞",items:i})}if(this.selectedDoba&&a.push({id:"repeat",title:"Refrén",icon:'<i class="fa-solid fa-repeat"></i>',items:[e("repeat-start","Opakovať začiatok",(()=>this.addOpakovanie("zaciatok")),"[:"),e("repeat-end","Opakovať koniec",(()=>this.addOpakovanie("koniec")),":]"),e("repeat-reset","Zrušiť opakovanie",(()=>this.addOpakovanie("zrusit")),"Zrušiť")]}),(this.selectedCast||0===this.selectedCast)&&4==this.zapisyData.doby){const t=[{args:[1,0,0,"",!0],label:"|----|"},{args:[2,0,0,"",!0],label:"|--|--|"},{args:[2,1,0,"popis-2",!0],label:"|-|-|--|"},{args:[2,1,0,"popis-2",!1],label:"|--|-|-|"},{args:[1,1,1,"popis-2",!0],label:"|-|--|-|"},{args:[4,0,0,"",!0],label:"|-|-|-|"}].map(((a,t)=>e(`popis-4-${t}`,a.label,(()=>this.addPopis(...a.args)),null)));a.push({id:"popis-4",title:"Popis",icon:'<i class="fa-solid fa-pen-to-square"></i>',items:t})}if((this.selectedCast||0===this.selectedCast)&&3==this.zapisyData.doby){const t=[{args:[1,0,0,"",!0],label:"|-----|"},{args:[1,2,0,"popis-2",!0],label:"|-|--|--|"},{args:[1,2,0,"popis-2",!1],label:"|--|--|-|"},{args:[2,1,0,"popis-3",!0],label:"|-|-|---|"},{args:[2,1,0,"popis-3",!1],label:"|---|-|-|"},{args:[5,0,0,"",!0],label:"|-|-|-|-|-|"}].map(((a,t)=>e(`popis-3-${t}`,a.label,(()=>this.addPopis(...a.args)),a.label.split(" ")[1])));a.push({id:"popis-3",icon:"Popisy",innerLabel:"Popisy",items:t})}if(this.selectedTakt&&(a.push({id:"visibility",title:"Zobrazenie",icon:'<i class="fa-solid fa-eye"></i>',items:[e("hide-takt","Skryť takt",(()=>this.setGhost("hide","takt")),"Skryť"),e("show-takt","Zobraziť takt",(()=>this.setGhost("show","takt")),"Zobraziť"),e("hide-doba","Skryť dobu",(()=>this.setGhost("hide","doba")),"Skryť"),e("show-doba","Zobraziť dobu",(()=>this.setGhost("show","doba")),"Zobraziť")]}),a.push({id:"copy",title:"Kopírovať",icon:'<i class="fa-solid fa-copy"></i>',items:[e("copy-takt","Skopírovať takt",(()=>this.copyTakt()),"Kopírovať"),e("paste-takt","Vložiť takt",(()=>this.pasteTakt()),"Vložiť"),e("copy-cast","Skopírovať časť",(()=>this.copyCast()),"Kopírovať"),e("paste-cast","Vložiť časť",(()=>this.pasteCast()),"Vložiť")]})),!this.selectedRiadok){const t=[];this.selectedTakt&&(t.push(e("index-add-takt","Pridať indexy",(()=>this.setIndex("","takt")),"Pridať")),t.push(e("index-remove-takt","Vymazať indexy",(()=>this.setIndex(0,"takt")),"Vymazať"))),t.push(e("index-add-cast","Pridať všetky indexy",(()=>this.setIndex("","cast")),"Pridať")),t.push(e("index-remove-cast","Vymazať všetky indexy",(()=>this.setIndex(0,"cast")),"Vymazať")),t.length&&a.push({id:"indexy",icon:'<i class="fa-solid fa-hands"></i>',items:t})}return a},visibleRadialItems(){if(!this.radialPath.length)return this.radialRootItems;const a=this.radialPath[this.radialPath.length-1];return Array.isArray(a.items)?a.items:[]},radialCenter(){return this.radialSize/2},radialViewBox(){return`0 0 ${this.radialSize} ${this.radialSize}`},radialAngleStep(){return this.visibleRadialItems.length?qa/this.visibleRadialItems.length:qa},radialCenterLabel(){const a=this.getRadialItemLabel(this.radialHoveredItem);return a||(this.radialPath.length?"Späť":"Zavrieť")},displayedPocetTaktov:{get(){return Math.floor(this.dataNoty.pocetTaktov/3)},set(a){this.dataNoty.pocetTaktov=3*a}}}},Pa=t(89);const Aa=(0,Pa.Z)(Va,[["render",Ma],["__scopeId","data-v-b003fcd8"]]);var Ba=Aa}}]);