"use strict";(self["webpackChunkheligonkova_akademia"]=self["webpackChunkheligonkova_akademia"]||[]).push([[1854],{1854:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var s=a(3396),l=a(7139);const n={class:"calendar-wrapper"},i={class:"months",ref:"months"},r=["onClick"],d={key:0,class:"days",ref:"days"},o=["onClick"],h={key:0,class:"types"},y={class:"type"},c=["onClick"];function u(e,t,a,u,D,p){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",n,[(0,s._)("div",i,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(p.monthsOfYear,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:`${e.name}-${e.year}`,class:(0,l.C_)(["month",{selected:p.isCurrentMonth(e,t)}]),onClick:e=>p.scrollMonthToCenter(t)},(0,l.zw)(e.name),11,r)))),128))],512),a.showDays&&!a.hideDays?((0,s.wg)(),(0,s.iD)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.displayedWorkingDays,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:e.date,class:"day",onClick:e=>p.scrollDayToCenter(t)},[(0,s._)("p",{class:(0,l.C_)({active:p.isCurrentDay(t)})},(0,l.zw)(e.dayNumber),3),(0,s._)("span",null,(0,l.zw)(e.dayName),1)],8,o)))),128))],512)):(0,s.kq)("",!0)]),t[0]||(t[0]=(0,s._)("div",{class:"line horizontal"},null,-1)),a.showFilter?((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(p.filteredDaysOfWeekFull,(t=>((0,s.wg)(),(0,s.iD)("p",{key:t,class:(0,l.C_)(["button",{active:p.isTypeActive(t)}]),onClick:a=>{p.setTypDayFilter(t),e.$emit("day-changed",t)}},(0,l.zw)(t),11,c)))),128))])])):(0,s.kq)("",!0)],64)}a(560);var D={emits:["day-changed","date-changed","month-changed"],props:{showFilter:{type:Boolean,default:()=>!0},showAllFilter:{type:Boolean,default:()=>!1},showDays:{type:Boolean,default:()=>!0},allowedDaysFull:{type:Array,default:()=>[]},allowedTimesByDay:{type:Object,default:()=>({})},hideDays:{type:Boolean,default:!1}},inject:["getAllowedDaysFull"],data(){return{daysOfWeek:["Po","Ut","Str","Št","Pi"],daysOfWeekFull:["Pondelok","Utorok","Streda","Štvrtok","Piatok"],selectedTypDays:[],currentYear:(new Date).getFullYear(),visibleYears:[],monthNames:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],selectedMonthIndex:null,selectedDayIndex:null,displayedWorkingDays:[],calendarMap:{},calendarData:{},selectedDay:null,selectedFullDate:"",today:new Date,centeringLock:!1,generateMonthData(e,t){const a=["Ne","Po","Ut","Str","Št","Pi","So"],s=new Date(e,t+1,0).getDate(),l=[];for(let n=1;n<=s;n++){const s=new Date(e,t,n);l.push({dayNumber:n,dayName:a[s.getDay()],month:t,year:e,date:`${e}-${String(t+1).padStart(2,"0")}-${String(n).padStart(2,"0")}`})}return l}}},computed:{allowedDaysFullRaw(){if(this.allowedDaysFull&&this.allowedDaysFull.length)return this.allowedDaysFull;const e=this.getAllowedDaysFull,t="function"===typeof e?e():[];return Array.isArray(t)?t:[]},hasCalendar(){return this.allowedDaysFullRaw.length>0},allowedDaysFullEffective(){return this.hasCalendar?this.allowedDaysFullRaw:this.daysOfWeekFull},allowedDaysAbbrev(){const e={Pondelok:"Po",Utorok:"Ut",Streda:"Str","Štvrtok":"Št",Piatok:"Pi"};return this.allowedDaysFullEffective.map((t=>e[t]||t))},filteredDaysOfWeekFull(){return this.showAllFilter?this.daysOfWeekFull:this.daysOfWeekFull.filter((e=>this.allowedDaysFullEffective.includes(e)))},monthsOfYear(){const e=this.visibleYears.flatMap((e=>this.monthNames.map(((t,a)=>({fullName:t,index:a,year:e})))));return e.map(((e,t,a)=>{const s=0===t||e.year!==a[t-1].year;return{...e,name:s?`${e.fullName} ${String(e.year).slice(-2)}`:e.fullName}}))}},methods:{generateWorkingDaysForMonth(e,t){const a=["Po","Ut","Str","Št","Pi"],s=new Date(e,t+1,0).getDate(),l=[];for(let n=1;n<=s;n++){const s=new Date(e,t,n),i=s.getDay();i>=1&&i<=5&&l.push({dayName:a[i-1],dayNumber:n,year:e,month:t,date:`${e}-${String(t+1).padStart(2,"0")}-${String(n).padStart(2,"0")}`})}return l},setTypDayFilter(e){const t=1===this.selectedTypDays.length&&this.selectedTypDays[0]===e;this.selectedTypDays=t?[]:[e],this.updateDisplayedWorkingDays();const a=this.showAllFilter?this.applySelectIndex(3,!1):this.pickTodayOrClosestInCurrentMonth();-1!==a&&this.applySelectIndex(a,!0)},isTypeActive(e){return 1===this.selectedTypDays.length&&this.selectedTypDays[0]===e},isCurrentMonth(e,t){return t===this.selectedMonthIndex},isCurrentDay(e){return e===this.selectedDayIndex},ensureTypeDefaultsFromAllowed(){const e=this.allowedDaysFullEffective;this.selectedTypDays=this.selectedTypDays.filter((t=>e.includes(t)))},fullToAbbrev(e){const t={Pondelok:"Po",Utorok:"Ut",Streda:"Str","Štvrtok":"Št",Piatok:"Pi"};return t[e]||e},updateDisplayedWorkingDays(){const e=this.allowedDaysAbbrev,t=this.selectedTypDays.length?this.selectedTypDays.map(this.fullToAbbrev):e,a=(()=>{if(null!==this.selectedMonthIndex&&-1!==this.selectedMonthIndex){const e=this.monthsOfYear[this.selectedMonthIndex];return this.calendarMap?.[e.year]?.[e.index]||[]}return Object.values(this.calendarMap).flatMap((e=>Object.values(e))).flat()})();this.displayedWorkingDays=a.filter((t=>e.includes(t.dayName))).filter((e=>t.includes(e.dayName)))},pickTodayOrClosestInCurrentMonth(){if(!this.displayedWorkingDays.length)return-1;const e=new Date,t=e.getFullYear(),a=e.getMonth(),s=e.getDate(),l=this.displayedWorkingDays.findIndex((e=>e.year===t&&e.month===a&&e.dayNumber===s));if(-1!==l)return l;let n=-1,i=1/0;for(let r=0;r<this.displayedWorkingDays.length;r++){const e=this.displayedWorkingDays[r];if(e.year!==t||e.month!==a)continue;const l=Math.abs(e.dayNumber-s);l<i&&(i=l,n=r)}return-1===n?0:n},scrollMonthToCenter(e){if(this.centeringLock)return;const t=this.$refs.months;if(!t)return;const a=t.querySelectorAll(".month");if(!a[e])return;this.centeringLock=!0;const s=a[e],l=t.getBoundingClientRect(),n=s.getBoundingClientRect(),i=n.left-l.left-l.width/2+n.width/2;t.scrollLeft+=i,this.selectedMonthIndex=e;const r=this.monthsOfYear[e],d=this.calendarMap?.[r.year]?.[r.index]||[],o=this.allowedDaysAbbrev,h=this.selectedTypDays.length?this.selectedTypDays.map(this.fullToAbbrev):o;this.displayedWorkingDays=d.filter((e=>o.includes(e.dayName))).filter((e=>h.includes(e.dayName))),this.$emit("month-changed",{month:r.index+1,year:r.year});const y=this.pickTodayOrClosestInCurrentMonth();this.applySelectIndex(-1!==y?y:this.displayedWorkingDays.length?0:-1,!this.hideDays),this.$nextTick((()=>{this.centeringLock=!1}))},scrollDayToCenter(e){if(this.applySelectIndex(e,!1),this.hideDays)return;const t=this.$refs.days;if(!t)return;const a=t.querySelectorAll(".day");if(!a[e])return;const s=a[e],l=t.getBoundingClientRect(),n=s.getBoundingClientRect(),i=n.left-l.left-l.width/2+n.width/2;t.scrollLeft+=i},applySelectIndex(e,t){this.selectedDayIndex=e;const a=-1!==e?this.displayedWorkingDays[e]:null;if(!a)return;this.selectedDay=a,this.selectedFullDate=`${a.dayName}, ${a.dayNumber}. ${this.monthNames[a.month]} ${a.year}`;const s={Ne:"Nedeľa",Po:"Pondelok",Ut:"Utorok",Str:"Streda","Št":"Štvrtok",Pi:"Piatok",So:"Sobota"};this.$emit("day-changed",s[a.dayName]||a.dayName),this.$emit("date-changed",a.date),!this.hideDays&&t&&this.$nextTick((()=>this.scrollDayToCenter(e)))},initializeCalendarMap(){const e=[this.currentYear-1,this.currentYear,this.currentYear+1];e.forEach((e=>{this.calendarMap[e]={};for(let t=0;t<=11;t++)this.calendarMap[e][t]=this.generateWorkingDaysForMonth(e,t)}))}},mounted(){const e=new Date;this.today=e;const t=e.getFullYear(),a=e.getMonth(),s=e.getDate();this.calendarData[t]||(this.calendarData[t]={}),this.calendarData[t][a]||(this.calendarData[t][a]=this.generateMonthData(t,a)),this.visibleYears=[this.currentYear-1,this.currentYear,this.currentYear+1],this.initializeCalendarMap(),this.ensureTypeDefaultsFromAllowed(),this.selectedMonthIndex=this.monthsOfYear.findIndex((e=>e.index===a&&e.year===t)),-1===this.selectedMonthIndex&&(this.selectedMonthIndex=0),this.updateDisplayedWorkingDays();const l=this.displayedWorkingDays.findIndex((e=>e.dayNumber===s&&e.month===a&&e.year===t)),n=-1!==l?l:this.pickTodayOrClosestInCurrentMonth();this.applySelectIndex(-1!==n?n:this.displayedWorkingDays.length?0:-1,!1),this.$nextTick((()=>{requestAnimationFrame((()=>{-1!==this.selectedMonthIndex&&this.$refs.months&&this.scrollMonthToCenter(this.selectedMonthIndex),!this.hideDays&&-1!==this.selectedDayIndex&&this.$refs.days&&this.scrollDayToCenter(this.selectedDayIndex)}))}))},watch:{allowedDaysFullRaw(){this.ensureTypeDefaultsFromAllowed(),this.updateDisplayedWorkingDays();const e=this.pickTodayOrClosestInCurrentMonth();this.applySelectIndex(-1!==e?e:this.displayedWorkingDays.length?0:-1,!1)},hideDays(){this.$nextTick((()=>{!this.hideDays&&-1!==this.selectedDayIndex&&this.$refs.days&&this.scrollDayToCenter(this.selectedDayIndex)}))}}},p=a(89);const f=(0,p.Z)(D,[["render",u],["__scopeId","data-v-05334aaa"]]);var g=f}}]);