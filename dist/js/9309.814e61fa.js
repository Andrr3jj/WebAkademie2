"use strict";(self["webpackChunkheligonkova_akademia"]=self["webpackChunkheligonkova_akademia"]||[]).push([[9309],{7070:function(e,t,a){a.d(t,{Z:function(){return _}});var o=a(3396),n=a(9242),s=a(208),i=a(5139),l=a(9559);const r={class:"box-item"},d={id:"login-block-basic",class:"login-block-basic"},c={class:"row"},u={class:"row"},g={class:"underline"};function p(e,t,a,p,h,m){const v=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",r,[t[7]||(t[7]=(0,o._)("h3",null,"PRIHLÁSIŤ SA",-1)),(0,o._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>m.onSubmit&&m.onSubmit(...e)),["prevent"]))},[(0,o._)("div",d,[(0,o._)("div",c,[t[3]||(t[3]=(0,o._)("div",null,[(0,o._)("img",{src:s})],-1)),(0,o.wy)((0,o._)("input",{ref:"email",type:"text",name:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>h.formData.email=e)},null,512),[[n.nr,h.formData.email]])]),(0,o._)("div",u,[t[4]||(t[4]=(0,o._)("div",null,[(0,o._)("img",{src:i})],-1)),(0,o.wy)((0,o._)("input",{ref:"heslo",type:"password",name:"heslo",placeholder:"Heslo","onUpdate:modelValue":t[1]||(t[1]=e=>h.formData.heslo=e)},null,512),[[n.nr,h.formData.heslo]])])]),(0,o._)("div",g,[(0,o.Wm)(v,{to:"/zabudnute-heslo"},{default:(0,o.w5)((()=>t[5]||(t[5]=[(0,o.Uk)("Zabudnuté heslo")]))),_:1,__:[5]})]),t[6]||(t[6]=(0,o._)("button",{class:"button",type:"submit"},[(0,o._)("img",{src:l,alt:""}),(0,o._)("a",null,"Prihlásiť sa")],-1))],32)])}var h={data(){return{formData:{email:"",heslo:""}}},methods:{onSubmit(){this.isFormValid()&&this.$store.dispatch("prihlasenie",{email:this.formData.email,heslo:this.formData.heslo})},isFormValid(){const e=this.formData.email.trim(),t=this.formData.heslo.trim();return e||t?e?t?!!e.includes("@")||(this.$store.state.SnackBarText="Neplatná emailová adresa, chýba znak @",!1):(this.$store.state.SnackBarText="Prosím zadajte heslo",!1):(this.$store.state.SnackBarText="Prosím zadajte email",!1):(this.$store.state.SnackBarText="Pre prihlásenie je nutné vyplniť všetky polia formuláru",!1)}}},m=a(89);const v=(0,m.Z)(h,[["render",p],["__scopeId","data-v-2a06a2a6"]]);var _=v},4015:function(e,t,a){a.d(t,{Z:function(){return g}});var o=a(3396),n=a(9242);const s={class:"modal-content base-modal"},i={class:"modal-scroll"};function l(e,t,a,l,r,d){const c=(0,o.up)("TheMenu");return(0,o.wg)(),(0,o.iD)("div",{class:"overlay",onClick:t[2]||(t[2]=(0,n.iM)((t=>e.$emit("close")),["self"]))},[(0,o._)("div",{class:"modal-overlay",onClick:t[1]||(t[1]=(0,n.iM)((t=>e.$emit("close")),["self"]))},[(0,o._)("div",s,[(0,o._)("div",i,[((0,o.wg)(),(0,o.j4)((0,o.LL)(a.contentComponent),(0,o.dG)(a.contentProps,{onClose:t[0]||(t[0]=t=>e.$emit("close"))}),null,16))])])]),(0,o.Wm)(c,{class:"fake-menu",style:{margin:"0 1em",opacity:"0","z-index":"-1","pointer-events":"none"}})])}var r=a(3239),d={components:{TheMenu:r.Z},props:{contentComponent:{type:[Object,Function,String],required:!0},contentProps:{type:Object,default:()=>({})}},mounted(){document.body.style.overflow="hidden",window.scrollTo({top:0})},beforeUnmount(){document.body.style.overflow=""}},c=a(89);const u=(0,c.Z)(d,[["render",l],["__scopeId","data-v-75c8706c"]]);var g=u},5016:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ze}});var o=a(3396);const n=["id"],s={class:"scroll"},i=["id"],l={class:"scroll"};function r(e,t,a,r,d,c){const u=(0,o.up)("HeaderSection"),g=(0,o.up)("CategoryFilters"),p=(0,o.up)("SongTable"),h=(0,o.up)("SpevnikPagination"),m=(0,o.up)("SearchBar"),v=(0,o.up)("FavoritesToggle"),_=(0,o.up)("ModalSkeleton");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("section",{class:"computer",id:e.$route.name,ref:"contentArea"},[(0,o._)("div",s,[(0,o.Wm)(u),(0,o.Wm)(g,{selected:d.selectedCategory,onSelectCategory:t[0]||(t[0]=e=>d.selectedCategory=e)},null,8,["selected"]),(0,o.Wm)(p,{songs:c.paginatedSongs,startIndex:(d.currentPage-1)*d.itemsPerPage,onToggleFavorite:c.toggleFavorite,noResultsMessage:c.noResultsMessage},null,8,["songs","startIndex","onToggleFavorite","noResultsMessage"]),(0,o.Wm)(h,{total:c.filteredMeta.length,current:d.currentPage,perPage:d.itemsPerPage,onChangePage:t[1]||(t[1]=e=>d.currentPage=e)},null,8,["total","current","perPage"]),(0,o.Wm)(m,{modelValue:d.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=e=>d.searchQuery=e)},null,8,["modelValue"]),t[7]||(t[7]=(0,o._)("div",{class:"line horizontal"},null,-1)),(0,o.Wm)(v,{showingOnlyFavorites:d.onlyFavorites,onToggleFavorites:c.toggleFavorites,onAddSong:c.addSong},null,8,["showingOnlyFavorites","onToggleFavorites","onAddSong"])])],8,n),(0,o._)("div",{class:"mobile",id:e.$route.name},[(0,o._)("section",null,[(0,o._)("div",l,[(0,o.Wm)(u),(0,o.Wm)(g,{selected:d.selectedCategory,onSelectCategory:t[3]||(t[3]=e=>d.selectedCategory=e)},null,8,["selected"]),(0,o.Wm)(p,{songs:c.paginatedSongs,startIndex:(d.currentPage-1)*d.itemsPerPage,onToggleFavorite:c.toggleFavorite,noResultsMessage:c.noResultsMessage},null,8,["songs","startIndex","onToggleFavorite","noResultsMessage"]),(0,o.Wm)(h,{total:c.filteredMeta.length,current:d.currentPage,perPage:d.itemsPerPage,onChangePage:t[4]||(t[4]=e=>d.currentPage=e)},null,8,["total","current","perPage"]),(0,o.Wm)(m,{modelValue:d.searchQuery,"onUpdate:modelValue":t[5]||(t[5]=e=>d.searchQuery=e)},null,8,["modelValue"]),(0,o.Wm)(v,{showingOnlyFavorites:d.onlyFavorites,onToggleFavorites:c.toggleFavorites,onAddSong:c.addSong},null,8,["showingOnlyFavorites","onToggleFavorites","onAddSong"])])])],8,i),d.showAddModal?((0,o.wg)(),(0,o.j4)(_,{key:0,"content-component":c.modalComponent,"content-props":{anchorPosition:d.modalAnchor},onClose:t[6]||(t[6]=e=>d.showAddModal=!1)},null,8,["content-component","content-props"])):(0,o.kq)("",!0)],64)}a(8858),a(1318),a(3228),a(560);const d={class:"header-section"};function c(e,t,a,n,s,i){return(0,o.wg)(),(0,o.iD)("div",d,t[0]||(t[0]=[(0,o._)("h1",{class:"Bahnschrift"},"Vitaj v spevníku Heligónkovej Akadémie!",-1),(0,o._)("h5",{class:"Bahnschrift"}," Tu nájdeš texty piesní, ktoré spievame, hráme a milujeme. ",-1)]))}var u={name:"HeaderSection"},g=a(89);const p=(0,g.Z)(u,[["render",c],["__scopeId","data-v-1e773218"]]);var h=p,m=a(7139);const v={class:"category-filters"},_=["onClick"];function y(e,t,a,n,s,i){return(0,o.wg)(),(0,o.iD)("div",v,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.categories,(t=>((0,o.wg)(),(0,o.iD)("button",{key:t,class:(0,m.C_)(["button",{active:t===a.selected}]),onClick:o=>e.$emit("select-category",t===a.selected?null:s.categoryMap[t]||t)},[(0,o._)("p",null,(0,m.zw)(t),1)],10,_)))),128))])}var f={name:"CategoryFilters",props:{selected:{type:String,default:null}},data(){return{categories:["Polka","Valčík","České","Terchovské","Moderné"],categoryMap:{Polka:"Polka","Valčík":"Valčík","České":"Česká","Terchovské":"Terchovská","Moderné":"Moderná"}}}};const k=(0,g.Z)(f,[["render",y],["__scopeId","data-v-59d2662a"]]);var w=k,b=a(3139);const C={class:"search"},P={class:"search-bar"},S=["value"];function x(e,t,a,n,s,i){return(0,o.wg)(),(0,o.iD)("div",C,[(0,o._)("div",P,[t[1]||(t[1]=(0,o._)("img",{src:b,alt:"Vyhľadávanie"},null,-1)),(0,o._)("input",{type:"text",value:a.modelValue,placeholder:"Vyhľadať pieseň",onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))},null,40,S)])])}var z={name:"SearchBar",props:{modelValue:{type:String,default:""}}};const M=(0,g.Z)(z,[["render",x],["__scopeId","data-v-1134aeb1"]]);var F=M,j=a.p+"img/heligonka.40759cd7.png",D=a(2288),T=a(2548);const V={class:"song-table"},A=["onClick"],$={class:"index"},I={key:0},L={class:"center"},Z={class:"favorite-icon"},U={class:"center"},B={key:0},W={colspan:"3",style:{"text-align":"center","vertical-align":"middle",height:"200px"}};function O(e,t,a,n,s,i){return(0,o.wg)(),(0,o.iD)("div",V,[(0,o._)("table",null,[t[2]||(t[2]=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{style:{width:"60%"}},"Názov piesní"),(0,o._)("th",{style:{width:"20%"},class:"center"},"Obľúbené"),(0,o._)("th",{style:{width:"20%"},class:"center"},"Zobrazenie")])],-1)),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.songs,((e,n)=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id,onClick:t=>i.goToSong(e),class:(0,m.C_)({"inactive-song":!e.zapis_id||"0"===e.zapis_id}),style:{cursor:"pointer"}},[(0,o._)("td",null,[(0,o._)("span",$,(0,m.zw)(a.startIndex+n+1)+".",1),e.zapis_id&&"0"!==e.zapis_id?((0,o.wg)(),(0,o.iD)("span",I,t[0]||(t[0]=[(0,o._)("img",{src:j,alt:"heligonka",class:"heligonka-icon"},null,-1)]))):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,m.zw)(e.name),1)]),(0,o._)("td",L,[(0,o.Uk)((0,m.zw)(e.favoriteCount||0)+" ",1),(0,o._)("span",Z,[(0,o._)("img",{src:D,alt:"Obľúbené",class:(0,m.C_)(["favorite-icon",{active:e.isFavorite}])},null,2)])]),(0,o._)("td",U,[(0,o.Uk)((0,m.zw)(e.views||0)+" ",1),t[1]||(t[1]=(0,o._)("span",{class:"view-icon"},[(0,o._)("img",{src:T,alt:"Zobrazené",class:"view-icon"})],-1))])],10,A)))),128)),0===a.songs.length?((0,o.wg)(),(0,o.iD)("tr",B,[(0,o._)("td",W,(0,m.zw)(a.noResultsMessage),1)])):(0,o.kq)("",!0)])])])}var N={name:"SongTable",props:{songs:Array,startIndex:Number,noResultsMessage:{type:String,default:""}},methods:{slugify(e,t){return String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")+"-"+t},goToSong(e){const t=this.slugify(e.name,e.id);e.zapis_id&&"0"!==e.zapis_id?this.$router.push(`/text-piesne/aktivna/${t}`):this.$router.push(`/text-piesne/neaktivna/${t}`)}}};const R=(0,g.Z)(N,[["render",O],["__scopeId","data-v-6cbe4ec2"]]);var Q=R;const H={class:"pagination"},q=["onClick"],Y=["disabled"];function J(e,t,a,n,s,i){return(0,o.wg)(),(0,o.iD)("div",H,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.totalPages,(t=>((0,o.wg)(),(0,o.iD)("button",{key:t,class:(0,m.C_)(["page-button",{active:t===a.current}]),onClick:a=>e.$emit("change-page",t)},[(0,o._)("p",null,(0,m.zw)(t),1)],10,q)))),128)),(0,o._)("button",{class:"page-button next",disabled:a.current===i.totalPages,onClick:t[0]||(t[0]=t=>e.$emit("change-page",a.current+1))},t[1]||(t[1]=[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10",viewBox:"0 0 6 10",fill:"none"},[(0,o._)("path",{d:"M1.14062 0.157509C0.909375 -0.0455796 0.61875 -0.0522749 0.382812 0.137424C0.146875 0.327122 0 0.684202 0 1.07253V8.92828C0 9.3166 0.146875 9.67368 0.382812 9.86338C0.61875 10.0531 0.909375 10.0442 1.14062 9.8433L5.64062 5.91542C5.86406 5.72126 6 5.37534 6 5.0004C6 4.62547 5.86406 4.28178 5.64062 4.08539L1.14062 0.157509Z",fill:"black"})],-1)]),8,Y)])}var K={name:"SpevnikPagination",props:{total:{type:Number,required:!0},current:{type:Number,required:!0},perPage:{type:Number,required:!0}},computed:{totalPages(){return Math.ceil(this.total/this.perPage)}}};const E=(0,g.Z)(K,[["render",J],["__scopeId","data-v-904d0c36"]]);var G=E;const X={class:"favorites-toggle"},ee={class:"actions"},te={class:"action"},ae={class:"action"};function oe(e,t,a,n,s,i){return(0,o.wg)(),(0,o.iD)("div",X,[t[6]||(t[6]=(0,o._)("div",{class:"info"},[(0,o._)("img",{src:j,alt:"ikona heligónky"}),(0,o._)("div",null,[(0,o._)("span",{class:"span_text"},"Ikonka heligónky pri názve piesne označuje:"),(0,o._)("p",null," Že k tejto piesni máme pripravený číselný zápis pre hru na heligónke. "),(0,o._)("p",null,"Ak pri piesni ikonu nevidíte, zápis zatiaľ k dispozícii nie je.")])],-1)),(0,o._)("div",ee,[(0,o._)("div",te,[t[3]||(t[3]=(0,o._)("p",null,"Poznáš pieseň, ktorú tu ešte nemáme?",-1)),(0,o._)("button",{class:"button",onClick:t[0]||(t[0]=t=>e.$emit("add-song"))},t[2]||(t[2]=[(0,o._)("p",null,"Chcem pridať pieseň",-1),(0,o._)("span",{class:"inline-icon"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none"},[(0,o._)("path",{d:"M16.5717 0.210951C16.8406 0.410148 17 0.728865 17 1.06418V3.45455V12.2193C17 13.6867 15.5723 14.8752 13.8125 14.8752C12.0527 14.8752 10.625 13.6867 10.625 12.2193C10.625 10.7518 12.0527 9.56328 13.8125 9.56328C14.1844 9.56328 14.543 9.6164 14.875 9.716V4.88214L6.375 7.43187V14.344C6.375 15.8115 4.94727 17 3.1875 17C1.42773 17 0 15.8115 0 14.344C0 12.8766 1.42773 11.6881 3.1875 11.6881C3.55938 11.6881 3.91797 11.7412 4.25 11.8408V6.64172V4.25134C4.25 3.78323 4.55879 3.36823 5.00703 3.23212L15.632 0.0449524C15.9541 -0.0513265 16.3027 0.00843285 16.5717 0.210951Z",fill:"black"})])],-1)]))]),(0,o._)("div",ae,[t[5]||(t[5]=(0,o._)("p",null,"Výber tvojích obľubených piesní",-1)),(0,o._)("button",{class:(0,m.C_)(["button favorites",{active:a.showingOnlyFavorites}]),onClick:t[1]||(t[1]=t=>e.$emit("toggle-favorites"))},t[4]||(t[4]=[(0,o._)("p",null,"Obľúbené",-1),(0,o._)("span",{class:"inline-icon"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"16",viewBox:"0 0 18 16",fill:"none"},[(0,o._)("path",{d:"M1.67344 9.43701L8.02617 15.6017C8.28984 15.8575 8.63789 16 9 16C9.36211 16 9.71016 15.8575 9.97383 15.6017L16.3266 9.43701C17.3953 8.40286 18 6.95213 18 5.43563V5.22368C18 2.66938 16.2246 0.491461 13.8023 0.0712247C12.1992 -0.206497 10.568 0.337983 9.42188 1.52926L9 1.96777L8.57812 1.52926C7.43203 0.337983 5.80078 -0.206497 4.19766 0.0712247C1.77539 0.491461 0 2.66938 0 5.22368V5.43563C0 6.95213 0.604687 8.40286 1.67344 9.43701Z",fill:"black"})])],-1)]),2)])])])}var ne={name:"FavoritesToggle",props:{showingOnlyFavorites:{type:Boolean,default:!1}}};const se=(0,g.Z)(ne,[["render",oe],["__scopeId","data-v-5aad543c"]]);var ie=se,le=a(9242);const re={class:"addsong-grid"},de={class:"addsong-left"},ce={class:"addsong-right"},ue={class:"form-group select-group"},ge={class:"form-group select-group"},pe={class:"form-group select-group"},he={class:"form-group modern-question"},me={class:"modern-radio"},ve={class:"footer-grid"};function _e(e,t,a,n,s,i){return(0,o.wg)(),(0,o.iD)("div",null,[t[21]||(t[21]=(0,o._)("h2",null,"Pridaj text piesne do zoznamu",-1)),t[22]||(t[22]=(0,o._)("div",{class:"modal-desc"},[(0,o._)("p",null,"Poznáš skvelú pieseň, ktorú ešte nemáme? Poď ju s nami zdieľať!"),(0,o._)("p",null," Stačí vyplniť niekoľko údajov a my ju po kontrole pridáme do našej zbierky. ")],-1)),(0,o._)("div",re,[(0,o._)("div",de,[t[9]||(t[9]=(0,o._)("span",{class:"section-title"},"▸ Čo vyplniť:",-1)),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.form.nazovPiesne=e),placeholder:"Názov piesne",class:"big-input"},null,512),[[le.nr,s.form.nazovPiesne]]),(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.form.textPiesne=e),placeholder:"Text piesne",class:"big-input"},null,512),[[le.nr,s.form.textPiesne]])]),(0,o._)("div",ce,[(0,o._)("div",ue,[t[11]||(t[11]=(0,o._)("label",null,"Typ piesne:",-1)),(0,o.wy)((0,o._)("select",{onChange:t[2]||(t[2]=e=>s.form.autorska="Autorská"===s.form.typ),"onUpdate:modelValue":t[3]||(t[3]=e=>s.form.typPiesne=e)},t[10]||(t[10]=[(0,o._)("option",null,"Ľudová",-1),(0,o._)("option",null,"Autorská",-1)]),544),[[le.bM,s.form.typPiesne]])]),(0,o._)("div",ge,[t[13]||(t[13]=(0,o._)("label",null,"Žáner:",-1)),(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.form.zaner=e)},t[12]||(t[12]=[(0,o._)("option",null,"Polka",-1),(0,o._)("option",null,"Valčík",-1)]),512),[[le.bM,s.form.zaner]])]),(0,o._)("div",pe,[t[15]||(t[15]=(0,o._)("label",null,"Pôvod:",-1)),(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.form.povod=e)},t[14]||(t[14]=[(0,o._)("option",null,"Česká",-1),(0,o._)("option",null,"Slovenská",-1),(0,o._)("option",null,"Iná",-1)]),512),[[le.bM,s.form.povod]])]),(0,o._)("div",he,[t[18]||(t[18]=(0,o._)("label",{class:"modern-label"},"Jedná sa o modernú pieseň?",-1)),(0,o._)("label",me,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>s.form.isModern=e),value:!0},null,512),[[le.e8,s.form.isModern]]),t[16]||(t[16]=(0,o._)("span",{class:"radio-custom"},null,-1)),t[17]||(t[17]=(0,o.Uk)(" Áno, ide o modernú pieseň "))])]),"Autorská"===s.form.typPiesne?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[t[19]||(t[19]=(0,o._)("div",{class:"modern-note"}," Pri autorskej piesni je potrebné uviesť meno autora textu ",-1)),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>s.form.menoAutora=e),placeholder:"Meno autora textu",class:"author-input"},null,512),[[le.nr,s.form.menoAutora]])],64)):(0,o.kq)("",!0)])]),(0,o._)("div",ve,[t[20]||(t[20]=(0,o._)("div",null,[(0,o._)("span",{class:"section-title"},"▸ Po odoslaní:"),(0,o._)("span",{class:"footer-desc"},[(0,o._)("p",null,"Tvoj návrh najprv skontrolujeme, a ak bude všetko"),(0,o._)("p",null,"v poriadku, pieseň pridáme medzi ostatné.")])],-1)),(0,o._)("button",{class:"button Adumu",onClick:t[8]||(t[8]=(...e)=>i.submitSong&&i.submitSong(...e))}," Odoslať na kontrolu ")])])}var ye=a(1076),fe={data(){return{form:this.getDefaultData()}},methods:{getDefaultData(){return{nazovPiesne:"",textPiesne:"",typPiesne:"Ľudová",zaner:"Polka",povod:"Česká",isModern:null,menoAutora:"",autorska:!1}},submitSong(){const e=new FormData;e.append("nazov",this.form.nazovPiesne);const t=this.form.textPiesne.replaceAll("\n","//n");e.append("text_piesne",t),e.append("typ",this.form.typPiesne),e.append("zaner",this.form.zaner),e.append("povod",this.form.povod),e.append("jeModerna",this.form.isModern?"true":"false"),e.append("autorska",this.form.autorska?"true":"false"),e.append("autor",this.form.menoAutora),ye["default"].post(this.$store.state.api+"/noty/texty/create.php",e).then((e=>{"Request fullfiled"===e.data.status?(this.$store.state.SnackBarText="Návrh odoslaný na kontrolu",this.resetForm()):this.$store.state.SnackBarText="Chyba pri odosielaní"})).catch((e=>{this.$store.state.SnackBarText="Chyba siete"}))},resetForm(){this.form=this.getDefaultData(),this.$emit("close")}}};const ke=(0,g.Z)(fe,[["render",_e],["__scopeId","data-v-7f38ae68"]]);var we=ke,be=a(4842);const Ce={class:"notlogin-grid"},Pe={class:"notlogin-left"},Se={class:"box"},xe={class:"box-item",style:{"align-items":"flex-end !important"}},ze={class:"button green"},Me={class:"notlogin-right"},Fe={class:"login-form-box"};function je(e,t,a,n,s,i){const l=(0,o.up)("router-link"),r=(0,o.up)("TheLogin");return(0,o.wg)(),(0,o.iD)("div",null,[t[8]||(t[8]=(0,o._)("h2",null,"Aby si mohol pridať text piesní, najprv sa prihlás.",-1)),t[9]||(t[9]=(0,o._)("div",{class:"modal-desc"},[(0,o._)("p",null," Nemáš ešte účet? Nevadí! Rýchlo sa zaregistruj a zdieľaj svoju hudbu s ostatnými. ")],-1)),(0,o._)("div",Ce,[t[6]||(t[6]=(0,o._)("img",{class:"modal-absolute-img",src:be,alt:"heligonkár"},null,-1)),(0,o._)("div",Pe,[(0,o._)("div",Se,[(0,o._)("div",xe,[t[1]||(t[1]=(0,o._)("p",null,"Prečo by ste sa mali zaregistrovať?",-1)),t[2]||(t[2]=(0,o._)("p",{class:"strong"}," 🎵 Pestrosť pesničiek pre všetky vkusy od ľudoviek po moderné hity ",-1)),t[3]||(t[3]=(0,o._)("p",{class:"strong"}," ✨ Interaktívne lekcie od skúsených učiteľov heligónky ",-1)),t[4]||(t[4]=(0,o._)("p",{class:"strong"},"💡 Osvojte si techniky a tipy od profesionálov",-1)),t[5]||(t[5]=(0,o._)("p",{class:"strong",style:{width:"50%"}}," 🎁 Možnosť zakúpiť si noty a nahrávky priamo od nás ",-1)),(0,o._)("div",ze,[(0,o.Wm)(l,{to:"/registracia"},{default:(0,o.w5)((()=>t[0]||(t[0]=[(0,o.Uk)("Registrovať")]))),_:1,__:[0]})])])])]),t[7]||(t[7]=(0,o._)("div",{class:"line"},null,-1)),(0,o._)("div",Me,[(0,o._)("div",Fe,[(0,o.Wm)(r)])])])])}var De=a(7070),Te={components:{TheLogin:De.Z}};const Ve=(0,g.Z)(Te,[["render",je],["__scopeId","data-v-0f27fa5a"]]);var Ae=Ve,$e=a(4015),Ie={name:"SpevnikView",components:{HeaderSection:h,CategoryFilters:w,SearchBar:F,SongTable:Q,SpevnikPagination:G,FavoritesToggle:ie,ModalSkeleton:$e.Z},data(){return{allMeta:[],songs:[],favoriteSongIds:[],onlyFavorites:!1,searchQuery:"",selectedCategory:null,currentPage:1,itemsPerPage:10,showAddModal:!1,modalAnchor:null,isLoggedIn:!1,isLoadingSongs:!1}},computed:{noResultsMessage(){return this.searchQuery.trim()?`Nebola nájdená žiadna pieseň pre „${this.searchQuery.trim()}”`:"Nie sú tu žiadne piesne."},filteredMeta(){let e=this.allMeta;if(this.onlyFavorites&&(e=e.filter((e=>this.favoriteSongIds.includes(String(e.id))))),this.searchQuery.trim()){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)))}return e.sort(((e,t)=>e.name.localeCompare(t.name,"sk",{sensitivity:"base"})))},paginatedMeta(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMeta.slice(e,e+this.itemsPerPage)},paginatedSongs(){return this.songs},modalComponent(){return this.isLoggedIn?we:Ae}},async mounted(){try{const e=await fetch("https://heligonkovaakademia.sk/api/user/auth/isLoggedIn.php"),t=await e.json(),a=t?.data?.toLowerCase()||"";this.isLoggedIn=a.includes("logged in")&&!a.includes("not")}catch{this.isLoggedIn=!1}await this.loadSongs(1,!0),this.$nextTick((()=>{const e=this.$refs.contentArea;if(e){const t=e.getBoundingClientRect();this.modalAnchor={top:t.top+t.height/2+window.scrollY,left:t.left+t.width/2+window.scrollX}}}))},methods:{async loadSongs(e=1,t=!1){if(this.isLoadingSongs)return;this.isLoadingSongs=!0;const a=this.selectedCategory,o=this.searchQuery.trim();try{if(this.currentPage=e,t||!this.allMeta.length){this.allMeta=[];const e=1e3;let t=0,n=[],s=0;do{const i=new URLSearchParams({pagination_index:t,pagination_limit:e,schvalene:1});a&&i.append("kategoria",a),o&&i.append("search",o);const l=await fetch(`${this.$store.state.api}/noty/texty/search.php?${i.toString()}`,{credentials:"include"}),r=await l.json();if(n=Array.isArray(r.data)?r.data:[],this.allMeta.push(...n.map((e=>({id:e.id,name:e.nazov,category:e.kategoria||""})))),t+=e,s+=1,s>10)break;if(this.selectedCategory!==a||this.searchQuery.trim()!==o)break}while(n.length===e);const i=Array.from(new Map(this.allMeta.map((e=>[e.id,e]))).values());i.sort(((e,t)=>t.id-e.id)),this.allMeta=i,this.currentPage=1}const n=this.paginatedMeta,s=await Promise.all(n.map((async e=>{const t=await fetch(`${this.$store.state.api}/noty/texty/load.php?id=${e.id}`,{credentials:"include"}),a=await t.json(),o=a.data||{};let n=[];if(Array.isArray(o.oblubene))n=o.oblubene;else if("string"===typeof o.oblubene&&o.oblubene.startsWith("["))try{n=JSON.parse(o.oblubene)}catch(s){}return{id:o.id,name:o.nazov,author:o.autor||"",zapis_id:o.product_id,views:Number(o.zobrazenia)||0,category:(o.zaner||o.kategoria||"").toLowerCase(),isFavorite:!(!this.isLoggedIn||!Array.isArray(n))&&n.includes(String(this.$store.state.user.id)),favoriteCount:Array.isArray(n)?n.length:0}})));this.songs=Array.from(new Map(s.map((e=>[e.id,e]))).values())}catch(n){this.songs=[]}finally{this.isLoadingSongs=!1}},async toggleFavorite(e){if(!e?.id)return;const t=new FormData;t.append("id",e.id);const a=await fetch("https://heligonkovaakademia.sk/api/noty/texty/favorite.php",{method:"POST",credentials:"include",body:t}),o=await a.json();e.isFavorite="favorite"===o.data,e.isFavorite?e.favoriteCount++:e.favoriteCount>0&&e.favoriteCount--},async loadFavoriteSongIds(){try{const e=await fetch("https://heligonkovaakademia.sk/api/noty/texty/getMyFavorite.php",{method:"POST",credentials:"include"}),t=await e.json();this.favoriteSongIds=t.status?.toLowerCase().includes("succes")?t.data.map((e=>String(e.id))):[]}catch{this.favoriteSongIds=[]}},addSong(){this.showAddModal=!0},async toggleFavorites(){this.onlyFavorites=!this.onlyFavorites,this.onlyFavorites&&await this.loadFavoriteSongIds(),this.loadSongs(1,!0)},async searchSongs(e){this.searchQuery=e,this.loadSongs(1,!0)},async loadFavoriteSongs(){try{const e=await fetch("https://heligonkovaakademia.sk/api/noty/texty/getMyFavorite.php",{credentials:"include"}),t=await e.json();t.status?.toLowerCase().includes("succes")&&(this.allMeta=t.data.map((e=>({id:e.id,name:e.nazov,category:e.kategoria||""}))),this.currentPage=1,this.loadSongs(1,!1))}catch{this.allMeta=[],this.currentPage=1,this.songs=[]}}},watch:{selectedCategory(){this.loadSongs(1,!0)},searchQuery:{handler(){this.loadSongs(1,!0)},immediate:!1},currentPage(e){this.isLoadingSongs||this.loadSongs(e,!1)}}};const Le=(0,g.Z)(Ie,[["render",r],["__scopeId","data-v-9a3b7d7e"]]);var Ze=Le},208:function(e,t,a){e.exports=a.p+"img/email.9ee4b2a5.svg"},5139:function(e,t,a){e.exports=a.p+"img/heslo.1b6f9472.svg"},3139:function(e,t,a){e.exports=a.p+"img/hladanie.697b6243.svg"},2288:function(e,t,a){e.exports=a.p+"img/oblubena.4ff4ad9a.svg"},2548:function(e,t,a){e.exports=a.p+"img/zobrazene.450d9775.svg"},4842:function(e,t,a){e.exports=a.p+"img/JurajPrihlasenie.bc52f194.png"}}]);